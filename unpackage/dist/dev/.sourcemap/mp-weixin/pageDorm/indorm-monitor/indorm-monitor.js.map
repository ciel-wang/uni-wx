{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pageDorm/indorm-monitor/indorm-monitor.vue?210f","webpack:///F:/HWD/test/pageDorm/indorm-monitor/indorm-monitor.vue?ac67","webpack:///F:/HWD/test/pageDorm/indorm-monitor/indorm-monitor.vue?2edd","webpack:///F:/HWD/test/pageDorm/indorm-monitor/indorm-monitor.vue?ecd3","uni-app:///pageDorm/indorm-monitor/indorm-monitor.vue","webpack:///F:/HWD/test/pageDorm/indorm-monitor/indorm-monitor.vue?165e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","myCard","uPopup","uButton","uDatetimePicker","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l2","_self","_c","__map","gradeClassArr","item","index","$orig","__get_orig","l1","ClassCurrent","children","item1","index1","l0","item2","index2","g0","activeArr","includes","id","_isMounted","e0","$event","$u","route","obj","JSON","stringify","staticObj","dormStsTimeCfgs","e1","e2","calendarShow","e3","classShow","e4","_temp","arguments","length","currentTarget","dataset","_temp2","eventParams","form","dayDate","e5","e6","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","nowTime","timer","gradeArr","notBack","notOut","lateOut","lateBack","qjCount","current","pageCount","loadStatus","classIds","scrollTop","menuHeight","menuItemHeight","dateValue","onLoad","methods","selectClassSubmit","selectClass","swichMenu","getElRect","query","size","setTimeout","data2tree","label","type","data2treeDG","dataArrayIndex","childrenArray","parentId","schoolId","objTemp","i","data3treeDG","getStaticList","d","getGradeList","params","v","calendarChange","scrolltolower","backClick","uni","url","onUnload","clearInterval"],"mappings":"iKAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6CACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,MAAO,WACL,OAAO,iHAITC,OAAQ,WACN,OAAO,kDAITC,OAAQ,WACN,OAAO,mHAITC,QAAS,WACP,OAAO,qHAITC,gBAAiB,WACf,OAAO,wIAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,eAAe,SAAUC,EAAMC,GACpD,IAAIC,EAAQX,EAAIY,WAAWH,GACvBI,EACFb,EAAIc,cAAgBJ,EAChBV,EAAIO,MAAME,EAAKM,UAAU,SAAUC,EAAOC,GACxC,IAAIN,EAAQX,EAAIY,WAAWI,GACvBE,EAAKlB,EAAIO,MAAMS,EAAMD,UAAU,SAAUI,EAAOC,GAClD,IAAIT,EAAQX,EAAIY,WAAWO,GACvBE,EAAKrB,EAAIsB,UAAUC,SAASJ,EAAMK,IACtC,MAAO,CACLb,MAAOA,EACPU,GAAIA,MAGR,MAAO,CACLV,MAAOA,EACPO,GAAIA,MAGR,KACN,MAAO,CACLP,MAAOA,EACPE,GAAIA,OAGHb,EAAIyB,aACPzB,EAAI0B,GAAK,SAAUC,GACjB3B,EAAI4B,GAAGC,MAAM,4CAA6C,CACxDC,IAAKC,KAAKC,UAAUhC,EAAIiC,UAAUC,oBAGtClC,EAAImC,GAAK,SAAUR,GACjB,OAAO3B,EAAI4B,GAAGC,MAAM,8CAEtB7B,EAAIoC,GAAK,SAAUT,GACjB3B,EAAIqC,cAAe,GAErBrC,EAAIsC,GAAK,SAAUX,GACjB3B,EAAIuC,WAAY,GAElBvC,EAAIwC,GAAK,SAAUb,EAAQlB,GACzB,IAAIgC,EAAQC,UAAUA,UAAUC,OAAS,GAAGC,cAAcC,QACxDC,EAASL,EAAMM,aAAeN,EAAM,gBACpChC,EAAOqC,EAAOrC,KAEhBT,EAAI4B,GAAGC,MAAM,4CAA6C,CACxDmB,KAAMjB,KAAKC,UAAUvB,GACrBwC,QAASjD,EAAIiD,WAGjBjD,EAAIkD,GAAK,SAAUvB,GACjB3B,EAAIsB,UAAY,IAElBtB,EAAImD,GAAK,SAAUxB,GACjB3B,EAAIqC,cAAe,IAGvBrC,EAAIoD,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLpD,GAAIA,MAKRqD,GAAmB,EACnBC,EAAkB,GACtB3D,EAAO4D,eAAgB,G,iCCtHvB,yHAAspB,eAAG,G,2KC+LzpB,SACA,0lBACA,CACAN,gBACA,OACAO,6CACAC,SACAC,YACAb,+CACAZ,gBACAJ,WAAA8B,cAAAC,aAAAC,cAAAC,eAAAC,WACAC,UACAC,YACAC,oBACA/B,aACA/B,iBACA+D,YACAC,YACA1D,eACA2D,aACAC,iBACApD,aACAqD,6BAGAC,kBAAA,WACA,mCACA,iDACA,KACA,iBACA,eACA,iBACA,qBACA,qBACA,2CACA,+BACA,sBAGAC,SACAC,6BACA,kBACA,uCACA,iBACA,eACA,iBACA,qBAEAC,wBACA,8BACA,kFAEA,2BAIAC,sBAAA,uIACAtE,mBAAA,gDAEA,GADA,iBAEA,qEACA,oEACA,kDAGA,2GATA,IAYAuE,wBAAA,WACA,2BACA,oCACAC,wBAAAC,UAAA,YAEA,EAMA,cALAC,uBACA,iBACA,OAIA,WAGAC,sBACA,SACA,0BAMA,OALAvD,sCACAN,cACA8D,mBACAC,UAEA,IACA,IACA,8BAEAC,0BACA,IADA,wBAKA,IAHAC,OACAC,KACAC,OACA,mBACAtC,OACAuC,aACA,OACAC,GACArE,aACA8D,kBACAC,OACAI,YAEAD,WAGA,SACA,0BAEA,OADA5D,6BACA,IACA,IACA2D,aACA,YACA,oBAxBA,wBACAA,EACAC,EACAC,EACAG,EACAzC,EACAuC,EAEAC,EAAA,IAmBA,UAEAE,0BACA,4BAIA,IAHA,WACA,KACA,OACA,oBACA,WACA,YACA,SACA,OACAvE,aACA8D,kBACAC,OACAI,YAEAD,WAGAD,aAEA,UAEAO,yBAAA,YACA,gBAAA/C,uBAAA,kBACA,wBACA,0BACAgD,gCACAA,+BACAA,gCACAA,iCACAA,gDACA,mBAIAC,wBAAA,WACA,qCACA,SACAC,0BACAA,0BACAA,6BACA,8CACA,qBACA,kBACA,oBACAF,+BACAG,gCACAA,+BACAA,gCACAA,iCACAA,sEACAA,gDAEA,+EAKAC,2BAEA,mDACA,qBACA,iBACA,eACA,iBACA,qBACA,qBAEAC,yBACA,6BACA,0BAEA,4BACA,sBAGAC,qBACAC,aAAAC,6BAGAC,oBACAC,4BAEA,c,6DC/YA,yHAAivC,eAAG,G","file":"pageDorm/indorm-monitor/indorm-monitor.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageDorm/indorm-monitor/indorm-monitor.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./indorm-monitor.vue?vue&type=template&id=c81d13ba&scoped=true&\"\nvar renderjs\nimport script from \"./indorm-monitor.vue?vue&type=script&lang=js&\"\nexport * from \"./indorm-monitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./indorm-monitor.vue?vue&type=style&index=0&id=c81d13ba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c81d13ba\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageDorm/indorm-monitor/indorm-monitor.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./indorm-monitor.vue?vue&type=template&id=c81d13ba&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker\" */ \"@/uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l2 = _vm.__map(_vm.gradeClassArr, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var l1 =\n      _vm.ClassCurrent == index\n        ? _vm.__map(item.children, function (item1, index1) {\n            var $orig = _vm.__get_orig(item1)\n            var l0 = _vm.__map(item1.children, function (item2, index2) {\n              var $orig = _vm.__get_orig(item2)\n              var g0 = _vm.activeArr.includes(item2.id)\n              return {\n                $orig: $orig,\n                g0: g0,\n              }\n            })\n            return {\n              $orig: $orig,\n              l0: l0,\n            }\n          })\n        : null\n    return {\n      $orig: $orig,\n      l1: l1,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.$u.route(\"/pageDorm/dormitory-rules/dormitory-rules\", {\n        obj: JSON.stringify(_vm.staticObj.dormStsTimeCfgs),\n      })\n    }\n    _vm.e1 = function ($event) {\n      return _vm.$u.route(\"/pageDorm/moniter-details/moniter-details\")\n    }\n    _vm.e2 = function ($event) {\n      _vm.calendarShow = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.classShow = true\n    }\n    _vm.e4 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      _vm.$u.route(\"/pageDorm/moniter-details/moniter-details\", {\n        form: JSON.stringify(item),\n        dayDate: _vm.dayDate,\n      })\n    }\n    _vm.e5 = function ($event) {\n      _vm.activeArr = []\n    }\n    _vm.e6 = function ($event) {\n      _vm.calendarShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./indorm-monitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./indorm-monitor.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"indormmonitorPage\">\n    <movable-area style=\"width: 100%; height: 100%\">\r\n      <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n        <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n      </movable-view>\r\n\t\t\t\r\n\t\t\t<view class=\"top\" v-if=\"vuex_useInfo.bindEmpType != 2\">\r\n\t\t\t  <view @click=\"$u.route('/pageDorm/dormitory-rules/dormitory-rules',{obj:JSON.stringify(staticObj.dormStsTimeCfgs)})\">【出入寝规则】</view>\r\n\t\t\t  <view \r\n\t\t\t\t\tclass=\"u-flex u-row-center u-col-center fw700 u-font-40\" \r\n\t\t\t\t\tstyle=\"width: 300rpx;height: 300rpx;background-color: #F2F2F2;border-radius: 300rpx;flex-direction: column;margin: 0 auto;\">\r\n\t\t\t    <view class=\"u-m-b-20\">{{nowTime}}</view>\r\n\t\t\t    <view \r\n\t\t\t\t\t\tclass=\"u-flex u-row-center u-col-center\" \r\n\t\t\t\t\t\tstyle=\"width: 110rpx;height: 60rpx;background-color: #FF1700;color: #fff;border-radius: 10rpx;\">{{staticObj.currStatus}}</view>\r\n\t\t\t  </view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<my-card margin=\"0\" :borderRadius=\"0\" showHead headBorderBottom>\r\n\t\t\t\t<template slot=\"head\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t  class=\"u-flex u-row-between fw700 u-font-32\" \r\n\t\t\t\t\t  v-if=\"vuex_useInfo.bindEmpType != 2\" \r\n\t\t\t\t\t  @click=\"$u.route('/pageDorm/moniter-details/moniter-details')\">\r\n\t\t\t\t\t  <text>本月宿舍考勤汇总</text>\r\n\t\t\t\t\t  <u-icon name=\"arrow-right\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"vuex_useInfo.bindEmpType == 2\" class=\"u-flex\">\r\n\t\t\t\t\t\t<u-icon name=\"shuxian\" customPrefix=\"custom-icon\"></u-icon>\r\n\t\t\t\t\t  <view @click=\"calendarShow = true\" class=\"u-flex\">\r\n\t\t\t\t\t    <text class=\"u-m-r-10\">在寝监控 {{dayDate}}</text>\r\n\t\t\t\t\t    <u-icon name=\"arrow-down\"></u-icon>\r\n\t\t\t\t\t  </view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t  <view class=\"u-flex u-flex-wrap\">\r\n\t\t\t    <view class=\"u-text-center u-width-33\">\r\n\t\t\t      <u-icon name=\"weigui\" custom-prefix=\"custom-icon\" size=\"60\" color=\"#FF5442\"></u-icon>\r\n\t\t\t      <view class=\"u-m-t-10 u-m-b-10\">未归寝</view>\r\n\t\t\t      <view class=\"u-flex u-row-center\">\r\n\t\t\t        <text class=\"fw700 u-m-l-4\" v-if=\"vuex_useInfo.bindEmpType == 2\">{{staticObj.notBack[0]}}</text>\r\n\t\t\t        <text v-if=\"vuex_useInfo.bindEmpType == 2\">人/</text>\r\n\t\t\t        <text class=\"fw700 u-m-r-4\">{{staticObj.notBack[1]}}</text>次\r\n\t\t\t      </view>\r\n\t\t\t    </view>\r\n\t\t\t    <view class=\"u-text-center u-width-33\">\r\n\t\t\t      <u-icon name=\"weichuhang\" custom-prefix=\"custom-icon\" size=\"60\" color=\"#EB5757\"></u-icon>\r\n\t\t\t      <view class=\"u-m-t-10 u-m-b-10\">未出寝</view>\r\n\t\t\t      <view class=\"u-flex u-row-center\">\r\n\t\t\t        <text class=\"fw700 u-m-l-4\" v-if=\"vuex_useInfo.bindEmpType == 2\">{{staticObj.notOut[0]}}</text>\r\n\t\t\t        <text v-if=\"vuex_useInfo.bindEmpType == 2\">人/</text>\r\n\t\t\t        <text class=\"fw700 u-m-r-4\">{{staticObj.notOut[1]}}</text>次\r\n\t\t\t      </view>\r\n\t\t\t    </view>\r\n\t\t\t    <view class=\"u-text-center u-width-33\">\r\n\t\t\t      <u-icon name=\"qingjia\" custom-prefix=\"custom-icon\" size=\"60\" color=\"#55AE31\"></u-icon>\r\n\t\t\t      <view class=\"u-m-t-10 u-m-b-10\">请假</view>\r\n\t\t\t      <view class=\"u-flex u-row-center\">\r\n\t\t\t        <text class=\"fw700 u-m-l-4\">{{staticObj.qjCount}}</text>\r\n\t\t\t        <text>{{vuex_useInfo.bindEmpType == 2 ? '人' : '次'}}</text>\r\n\t\t\t      </view>\r\n\t\t\t    </view>\r\n\t\t\t    <view class=\"u-text-center u-width-33 u-m-t-30\">\r\n\t\t\t      <u-icon name=\"xueshengwangui\" custom-prefix=\"custom-icon\" size=\"60\" color=\"#17ABE3\"></u-icon>\r\n\t\t\t      <view class=\"u-m-t-10 u-m-b-10\">晚归寝</view>\r\n\t\t\t      <view class=\"u-flex u-row-center\">\r\n\t\t\t        <text class=\"fw700 u-m-l-4\" v-if=\"vuex_useInfo.bindEmpType == 2\">{{staticObj.lateBack[0]}}</text>\r\n\t\t\t        <text v-if=\"vuex_useInfo.bindEmpType == 2\">人/</text>\r\n\t\t\t        <text class=\"fw700 u-m-r-4\">{{staticObj.lateBack[1]}}</text>次\r\n\t\t\t      </view>\r\n\t\t\t    </view>\r\n\t\t\t    <view class=\"u-text-center u-width-33 u-m-t-30\">\r\n\t\t\t      <u-icon name=\"wanchuyujing\" custom-prefix=\"custom-icon\" size=\"60\" color=\"#F76510\"></u-icon>\r\n\t\t\t      <view class=\"u-m-t-10 u-m-b-10\">晚出寝</view>\r\n\t\t\t      <view class=\"u-flex u-row-center\">\r\n\t\t\t        <text class=\"fw700 u-m-l-4\" v-if=\"vuex_useInfo.bindEmpType == 2\">{{staticObj.lateOut[0]}}</text>\r\n\t\t\t        <text v-if=\"vuex_useInfo.bindEmpType == 2\">人/</text>\r\n\t\t\t        <text class=\"fw700 u-m-r-4\">{{staticObj.lateOut[1]}}</text>次\r\n\t\t\t      </view>\r\n\t\t\t    </view>\r\n\t\t\t  </view>\r\n\t\t\t  <template slot=\"foot\">\r\n\t\t\t\t\t<view v-if=\"vuex_useInfo.bindEmpType == 2\" style=\"color: #303133;\" class=\"u-flex u-row-between\">\r\n\t\t\t\t\t\t<view class=\"u-flex\"><i class=\"custom-icon custom-icon-shuxian\"></i>详情</view>\r\n\t\t\t\t\t\t<view v-if=\"vuex_useInfo.isRelevancyClass\" @click=\"classShow = true\">\r\n\t\t\t\t\t\t\t<u-icon name=\"shaixuan1\" custom-prefix=\"custom-icon\" size=\"40\" color=\"#000\"></u-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t  </template>\r\n\t\t\t</my-card>\r\n\t\t\t\r\n      <scroll-view scroll-y style=\"height: calc(100% - 602rpx);width: 100%;\" @scrolltolower=\"scrolltolower\">\r\n        <my-card\r\n          margin=\"0\" :borderRadius=\"0\" :bodyStyle=\"{padding:'0 30rpx'}\" \r\n          v-if=\"vuex_useInfo.bindEmpType == 2\">\r\n          <view v-for=\"(item,index) in gradeArr\" :key=\"item.id\" class=\"u-p-t-30 u-p-b-30\" style=\"border-bottom: 1rpx dashed #e4e7ed;\">\r\n            <view class=\"u-flex u-row-between u-m-b-30\">\r\n              <view class=\"u-width-70 u-flex\">\r\n                <view class=\"u-line-1\" style=\"max-width: 55%;\">{{item.title}}</view>\r\n                <text>：住宿 {{item.LiveStudentCount}} 人</text>\r\n              </view>\r\n              <view @click=\"$u.route('/pageDorm/moniter-details/moniter-details',{form:JSON.stringify(item),dayDate:dayDate})\" class=\"u-flex\">\r\n                查看详情<u-icon name=\"arrow-right\" class=\"u-m-l-10\"></u-icon>\r\n              </view>\r\n            </view>\r\n            <view class=\"u-flex u-row-around\">\r\n              <view class=\"u-text-center\">\r\n                <text>未归寝</text>\r\n                <view class=\"u-m-t-4 u-flex u-row-center\">\r\n                  <text :class=\"[item.notBack[0] > 0 ? 'u-error-dark' : '']\">{{item.notBack[0]}}</text>人/ \r\n                  <text :class=\"[item.notBack[1] > 0 ? 'u-error-dark' : '']\">{{item.notBack[1]}}</text>次\r\n                </view>\r\n              </view>\r\n              <view class=\"u-text-center\">\r\n                <text>晚归寝</text>\r\n                <view class=\"u-m-t-4 u-flex u-row-center\">\r\n                  <text :class=\"[item.lateBack[0] > 0 ? 'u-error-dark' : '']\">{{item.lateBack[0]}}</text>人/\r\n                  <text :class=\"[item.lateBack[1] > 0 ? 'u-error-dark' : '']\">{{item.lateBack[1]}}</text>次\r\n                </view>\r\n              </view>\r\n              <view class=\"u-text-center\">\r\n                <text>请假</text>\r\n                <view class=\"u-m-t-4 u-flex u-row-center\">\r\n                  <text :class=\"[item.qjCount > 0 ? 'u-error-dark' : '']\">{{item.qjCount}}</text>\r\n                  <text>{{vuex_useInfo.bindEmpType == 2 ? '人' : '次'}}</text>\r\n                </view>\r\n              </view>\r\n              <view class=\"u-text-center\">\r\n                <text>未出寝</text>\r\n                <view class=\"u-m-t-4 u-flex u-row-center\">\r\n                  <text :class=\"[item.notOut[0] > 0 ? 'u-error-dark' : '']\">{{item.notOut[0]}}</text>人/\r\n                  <text :class=\"[item.notOut[1] > 0 ? 'u-error-dark' : '']\">{{item.notOut[1]}}</text>次\r\n                </view>\r\n              </view>\r\n              <view class=\"u-text-center\">\r\n                <text>晚出寝</text>\r\n                <view class=\"u-m-t-4 u-flex u-row-center\">\r\n                  <text :class=\"[item.lateOut[0] > 0 ? 'u-error-dark' : '']\">{{item.lateOut[0]}}</text>人/\r\n                  <text :class=\"[item.lateOut[1] > 0 ? 'u-error-dark' : '']\">{{item.lateOut[1]}}</text>次\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </my-card>\r\n      </scroll-view>\r\n    </movable-area>\r\n\t\t\r\n\t\t<u-popup :show=\"classShow\" mode=\"bottom\">\r\n\t\t  <view class=\"u-menu-wrap\">\r\n\t\t  \t<scroll-view scroll-y scroll-with-animation class=\"u-tab-view menu-scroll-view\" :scroll-top=\"scrollTop\">\r\n\t\t  \t\t<view \r\n\t\t        v-for=\"(item,index) in gradeClassArr\" :key=\"index\"\r\n\t\t\t\t\t\tclass=\"u-tab-item\" :class=\"[ClassCurrent==index ? 'u-tab-item-active' : '']\"\r\n\t\t        :data-current=\"index\" @tap.stop=\"swichMenu(index)\">\r\n\t\t  \t\t\t<text class=\"u-line-1\">{{item.label}}</text>\r\n\t\t  \t\t</view>\r\n\t\t  \t</scroll-view>\r\n\t\t  \t<block v-for=\"(item,index) in gradeClassArr\" :key=\"index\">\r\n\t\t  \t\t<scroll-view scroll-y class=\"bgfff\" v-if=\"ClassCurrent==index\">\r\n\t\t  \t\t\t<view class=\"u-p-16\">\r\n\t\t  \t\t\t\t<view class=\"class-item\" v-for=\"(item1, index1) in item.children\" :key=\"index1\">\r\n\t\t  \t\t\t\t\t<view class=\"item-title\">{{item1.label}}</view>\r\n\t\t  \t\t\t\t\t<view class=\"u-flex u-flex-wrap\">\r\n\t\t  \t\t\t\t\t\t<view \r\n\t\t                class=\"thumb-box\" :class=\"activeArr.includes(item2.id) ? 'activeItem' : ''\"\r\n\t\t                v-for=\"(item2, index2) in item1.children\" :key=\"index2\" \r\n\t\t                @click=\"selectClass(item2)\">\r\n\t\t  \t\t\t\t\t\t\t<view class=\"item-menu-name\">{{item2.label}}</view>\r\n\t\t  \t\t\t\t\t\t</view>\r\n\t\t  \t\t\t\t\t</view>\r\n\t\t  \t\t\t\t</view>\r\n\t\t  \t\t\t</view>\r\n\t\t  \t\t</scroll-view>\r\n\t\t  \t</block>\r\n\t\t  </view>\r\n\t\t  <view class=\"u-p-30 u-flex\" style=\"border-top: 10rpx solid #f6f6f6;\">\r\n\t\t    <u-button class=\"u-width-40\" type=\"info\" @click=\"activeArr = []\">重置</u-button>\r\n\t\t    <u-button class=\"u-width-40\" type=\"primary\" @click=\"selectClassSubmit\">完成</u-button>\r\n\t\t  </view>\r\n\t\t</u-popup>\r\n\t\t\r\n\t\t<u-datetime-picker\r\n\t\t\t:show=\"calendarShow\" :value=\"dateValue\"\r\n\t\t\tmode=\"date\" \r\n\t\t\t:maxDate=\"dateValue\" :minDate=\"0\" \r\n\t\t\t@confirm=\"calendarChange\" @cancel=\"calendarShow = false\"></u-datetime-picker>\r\n  </view>\n</template>\n\n<script>\r\n\timport { getGradeClassData } from '@/api/common/index.js'\r\n  import { getStatic, getTeacherGradeData } from '../api/monitor.js'\n  export default {\n    data() {\n      return {\n        nowTime:uni.$u.timeFormat(new Date(), 'hh:MM:ss'),\r\n        timer:\"\",\r\n        gradeArr:[],\r\n        dayDate:uni.$u.timeFormat(new Date(), 'yyyy-mm-dd'),\r\n        calendarShow:false,\r\n        staticObj:{notBack:[0,0],notOut:[0,0],lateOut:[0,0],lateBack:[0,0],qjCount:0},\r\n        current:1,\r\n        pageCount:0,\r\n        loadStatus: 'nomore',\r\n        classShow:false,\r\n        gradeClassArr:[],\r\n        classIds:\"\",\r\n        scrollTop: 0, //tab标题的滚动条位置\r\n        ClassCurrent: 0, // 预设当前项的值\r\n        menuHeight: 0, // 左边菜单的高度\r\n        menuItemHeight: 0, // 左边菜单item的高度\r\n        activeArr:[],\r\n\t\t\t\tdateValue:Number(new Date())\r\n      }\n    },\r\n    onLoad() {\r\n      this.timer = setInterval(() => {\r\n        this.nowTime = uni.$u.timeFormat(new Date(), 'hh:MM:ss')\r\n      },1000)\r\n      this.gradeArr = []\r\n      this.current = 1\r\n      this.pageCount = 0\r\n      this.getStaticList()\r\n      this.getGradeList()\r\n      getGradeClassData().then(r => {\r\n        var treeDatas = this.data2tree(r.data.data);\r\n        this.gradeClassArr = treeDatas;\r\n      })\r\n    },\n    methods: {\r\n      selectClassSubmit(){\r\n        this.classShow = false;\r\n        this.classIds = this.activeArr.join(',')\r\n        this.gradeArr = []\r\n        this.current = 1\r\n        this.pageCount = 0\r\n        this.getGradeList()\r\n      },\r\n      selectClass(item){\r\n        if(this.activeArr.includes(item.id)){\r\n          this.activeArr.splice(this.activeArr.findIndex(v => v === item.id), 1)\r\n        }else{\r\n          this.activeArr.push(item.id)\r\n        }\r\n      },\r\n      // 点击左边的栏目切换\r\n      async swichMenu(index) {\r\n      \tif(index == this.ClassCurrent) return ;\r\n      \tthis.ClassCurrent = index;\r\n      \t// 如果为0，意味着尚未初始化\r\n      \tif(this.menuHeight == 0 || this.menuItemHeight == 0) {\r\n      \t\tawait this.getElRect('menu-scroll-view', 'menuHeight');\r\n      \t\tawait this.getElRect('u-tab-item', 'menuItemHeight');\r\n      \t}\r\n      \t// 将菜单菜单活动item垂直居中\r\n      \tthis.scrollTop = index * this.menuItemHeight + this.menuItemHeight / 2 - this.menuHeight / 2;\r\n      },\r\n      // 获取一个目标元素的高度\r\n      getElRect(elClass, dataVal) {\r\n      \tnew Promise((resolve, reject) => {\r\n      \t\tconst query = uni.createSelectorQuery().in(this);\r\n      \t\tquery.select('.' + elClass).fields({size: true},res => {\r\n      \t\t\t// 如果节点尚未生成，res值为null，循环调用执行\r\n      \t\t\tif(!res) {\r\n      \t\t\t\tsetTimeout(() => {\r\n      \t\t\t\t\tthis.getElRect(elClass);\r\n      \t\t\t\t}, 10);\r\n      \t\t\t\treturn ;\r\n      \t\t\t}\r\n      \t\t\tthis[dataVal] = res.height;\r\n      \t\t}).exec();\r\n      \t})\r\n      },\r\n      data2tree(datas) {\r\n        let obj = {};\r\n        let newArr = datas.reduce((cur,next) => {\r\n          obj[next.schoolId] ? \"\" : obj[next.schoolId] = true && cur.push({\r\n            id: next.schoolId,\r\n            label: next.schoolName,\r\n            type:1\r\n          });\r\n          return cur;\r\n        },[]) \r\n        return this.data2treeDG(datas, newArr);\r\n      },\r\n      data2treeDG(datas, dataArray) {\r\n        for(var j = 0; j < dataArray.length; j++) {\r\n          var dataArrayIndex = dataArray[j];\r\n          var childrenArray = [];\r\n          var parentId = dataArrayIndex.id;\r\n          for(var i = 0; i < datas.length; i++) {\r\n            var data = datas[i];\r\n            var schoolId = data.schoolId;\r\n            if(schoolId == parentId) {//判断是否为儿子节点\r\n              var objTemp = {\r\n                id:data.gradeId,\r\n                label:data.gradeName,\r\n                type:2,\r\n                parentId:parentId\r\n              }\r\n              childrenArray.push(objTemp);\r\n            }\r\n          }\r\n          let obj = {};\r\n          let newArr = childrenArray.reduce((cur,next) => {\r\n            obj[next.id] ? \"\" : obj[next.id] = true && cur.push(next);\r\n            return cur;\r\n          },[]) \r\n          dataArrayIndex.children = newArr;\r\n          if(childrenArray.length > 0) {//有儿子节点则递归\r\n            this.data3treeDG(datas, childrenArray);\r\n          }\r\n        }\r\n        return dataArray;\r\n      },\r\n      data3treeDG(datas, dataArray) {\r\n        for(var j = 0; j < dataArray.length; j++) {\r\n          var dataArrayIndex = dataArray[j];\r\n          var childrenArray = [];\r\n          var parentId = dataArrayIndex.id;\r\n          for(var i = 0; i < datas.length; i++) {\r\n            var data = datas[i];\r\n            var gradeId = data.gradeId;\r\n            if(gradeId == parentId) {//判断是否为儿子节点\r\n              var objTemp = {\r\n                id:data.classId,\r\n                label:data.className,\r\n                type:3,\r\n                parentId:parentId\r\n              }\r\n              childrenArray.push(objTemp);\r\n            }\r\n          }\r\n          dataArrayIndex.children = childrenArray;\r\n        }\r\n        return dataArray;\r\n      },\r\n      getStaticList(){\r\n        getStatic({dayDate:this.dayDate}).then(r => {\r\n          let d = {...r.data.data};\r\n          if(JSON.stringify(d) != '{}'){\r\n            d.notBack = d.status_3.split('_')\r\n            d.notOut = d.status_4.split('_')\r\n            d.lateOut = d.status_2.split('_')\r\n            d.lateBack = d.status_1.split('_')\r\n            d.qjCount = d.qjCount ? d.qjCount : d.monthQjCount || 0\r\n            this.staticObj = d\r\n          }\r\n        })\r\n      },\r\n      getGradeList(){\r\n        if(this.vuex_useInfo.bindEmpType == 2){\r\n          let params = {}\r\n          params['current'] = this.current;\r\n          params['dayDate'] = this.dayDate;\r\n          params['classIds'] = this.classIds;\r\n          getTeacherGradeData(params).then(r => {\r\n            if(r.data.code == 200){\r\n              let d = r.data.data;\r\n              this.pageCount = d.pages;\r\n              d.records.forEach(v => {\r\n                v.notBack = v.status_3.split('_')\r\n                v.notOut = v.status_4.split('_')\r\n                v.lateOut = v.status_2.split('_')\r\n                v.lateBack = v.status_1.split('_')\r\n                v.LiveStudentCount = v.classLiveStudentCount || v.floorLiveStudenCount || 0\r\n                v.title = (v.gradeName + v.className) || v.floorName\r\n              })\r\n              this.gradeArr = [...this.gradeArr,...d.records]\r\n            }\r\n          })\r\n        }\r\n      },\r\n      calendarChange(e){\r\n        // this.dayDate = val[0];\r\n\t\t\t\tthis.dayDate = uni.$u.timeFormat(e.value,'yyyy-mm-dd')\r\n\t\t\t\tthis.calendarShow = false;\r\n        this.gradeArr = []\r\n        this.current = 1\r\n        this.pageCount = 0\r\n        this.getStaticList()\r\n        this.getGradeList()\r\n      },\r\n      scrolltolower(){\r\n        if (this.current >= this.pageCount) {\r\n          this.loadStatus = 'nomore';\r\n        } else {\r\n          this.current = ++this.current;\r\n          this.getGradeList()\r\n        }\r\n      },\n      backClick(){\r\n        uni.switchTab({ url:'/pages/index/index' })\r\n      }\n    },\r\n    onUnload() {\r\n      clearInterval(this.timer)\r\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .indormmonitorPage{\r\n    .top{\r\n      padding: 30rpx 30rpx 60rpx;\r\n      background-color: #fff;\r\n      margin-bottom: 20rpx;\r\n    }\r\n  }\r\n  .u-menu-wrap {\r\n    height: 600rpx;\r\n  \tdisplay: flex;\r\n  \toverflow: hidden;\r\n  }\r\n  .u-tab-view {\r\n  \twidth: 200rpx;\r\n  \theight: 100%;\r\n  }\r\n  .u-tab-item {\r\n  \theight: 110rpx;\r\n  \tbackground: #f6f6f6;\r\n  \tbox-sizing: border-box;\r\n  \tdisplay: flex;\r\n  \talign-items: center;\r\n  \tjustify-content: center;\r\n  \tfont-size: 26rpx;\r\n  \tcolor: #444;\r\n  \tfont-weight: 400;\r\n  \tline-height: 1;\r\n  }\r\n  .u-tab-item-active {\r\n  \tposition: relative;\r\n  \tcolor: #000;\r\n  \tfont-size: 30rpx;\r\n  \tfont-weight: 600;\r\n  \tbackground: #fff;\r\n  }\r\n  .u-tab-item-active::before {\r\n  \tcontent: \"\";\r\n  \tposition: absolute;\r\n  \tborder-left: 4px solid $u-primary;\r\n  \theight: 32rpx;\r\n  \tleft: 0;\r\n  \ttop: 39rpx;\r\n  }\r\n  .u-tab-view {\r\n  \theight: 100%;\r\n  }\r\n  .class-item {\r\n  \tmargin-bottom: 20rpx;\r\n  \tbackground-color: #fff;\r\n  \tpadding: 16rpx;\r\n  \tborder-radius: 8rpx;\r\n  }\r\n  .item-title {\r\n  \tfont-size: 26rpx;\r\n  \tcolor: $u-main-color;\r\n  \tfont-weight: bold;\r\n  }\r\n  .item-menu-name {\r\n  \tfont-weight: normal;\r\n  \tfont-size: 24rpx;\r\n  }\r\n  .thumb-box {\r\n  \twidth: 31%;\r\n  \tdisplay: flex;\r\n  \talign-items: center;\r\n  \tflex-direction: column;\r\n  \tmargin-top: 20rpx;\r\n    border: 1rpx solid #ccc;\r\n    margin-right: 4px;\r\n    padding: 10rpx 0;\r\n    border-radius: 10rpx;\r\n  }\r\n  .activeItem{\r\n    background-color: #2979ff;\r\n    color: #FFFFFF !important;\r\n    border-color: #2979ff;\r\n  }\n</style>\n","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./indorm-monitor.vue?vue&type=style&index=0&id=c81d13ba&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./indorm-monitor.vue?vue&type=style&index=0&id=c81d13ba&lang=scss&scoped=true&\""],"sourceRoot":""}