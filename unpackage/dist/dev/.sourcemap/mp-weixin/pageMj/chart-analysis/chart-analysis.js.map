{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pageMj/chart-analysis/chart-analysis.vue?4ea9","webpack:///F:/HWD/test/pageMj/chart-analysis/chart-analysis.vue?4177","webpack:///F:/HWD/test/pageMj/chart-analysis/chart-analysis.vue?5c07","webpack:///F:/HWD/test/pageMj/chart-analysis/chart-analysis.vue?bf95","uni-app:///pageMj/chart-analysis/chart-analysis.vue","webpack:///F:/HWD/test/pageMj/chart-analysis/chart-analysis.vue?fa92"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","myCard","uLoadmore","uActionSheet","uPopup","uButton","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","inOutRecord","length","l2","__map","gradeClassArr","item","index","$orig","__get_orig","l1","ClassCurrent","children","item1","index1","l0","item2","index2","g1","activeArr","includes","id","_isMounted","e0","$event","schemeShow","e1","classShow","e2","_temp","arguments","currentTarget","dataset","_temp2","eventParams","$u","route","dayDate","classId","schemaCode","e3","e4","e5","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","calendarShow","scheme","schemeList","staticObj","inCount","inEmpCount","outCount","outEmpCount","qjCount","totalStudentCount","pageCount","current","loadStatus","scrollTop","menuHeight","menuItemHeight","onLoad","methods","getSchemeList","name","value","resolve","search","initData","params","getTeacherMjStaticData","selectClassSubmit","selectClass","swichMenu","getElRect","query","size","setTimeout","data2tree","obj","label","type","data2treeDG","dataArrayIndex","childrenArray","parentId","schoolId","objTemp","i","data3treeDG","calendarChange","scrolltolower","schemeConfirm","backClick","uni","url"],"mappings":"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","file":"pageMj/chart-analysis/chart-analysis.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageMj/chart-analysis/chart-analysis.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chart-analysis.vue?vue&type=template&id=7770e2da&scoped=true&\"\nvar renderjs\nimport script from \"./chart-analysis.vue?vue&type=script&lang=js&\"\nexport * from \"./chart-analysis.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chart-analysis.vue?vue&type=style&index=0&id=7770e2da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7770e2da\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageMj/chart-analysis/chart-analysis.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chart-analysis.vue?vue&type=template&id=7770e2da&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uLoadmore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loadmore/u-loadmore\" */ \"@/uni_modules/uview-ui/components/u-loadmore/u-loadmore.vue\"\n      )\n    },\n    uActionSheet: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-action-sheet/u-action-sheet\" */ \"@/uni_modules/uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.inOutRecord.length\n  var l2 = _vm.__map(_vm.gradeClassArr, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var l1 =\n      _vm.ClassCurrent == index\n        ? _vm.__map(item.children, function (item1, index1) {\n            var $orig = _vm.__get_orig(item1)\n            var l0 = _vm.__map(item1.children, function (item2, index2) {\n              var $orig = _vm.__get_orig(item2)\n              var g1 = _vm.activeArr.includes(item2.id)\n              return {\n                $orig: $orig,\n                g1: g1,\n              }\n            })\n            return {\n              $orig: $orig,\n              l0: l0,\n            }\n          })\n        : null\n    return {\n      $orig: $orig,\n      l1: l1,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.schemeShow = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.classShow = true\n    }\n    _vm.e2 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      return _vm.$u.route(\"/pageMj/in-out-details/in-out-details\", {\n        dayDate: _vm.dayDate,\n        classId: item.classId,\n        schemaCode: _vm.schemaCode,\n      })\n    }\n    _vm.e3 = function ($event) {\n      _vm.schemeShow = false\n    }\n    _vm.e4 = function ($event) {\n      _vm.classShow = false\n    }\n    _vm.e5 = function ($event) {\n      _vm.activeArr = []\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chart-analysis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chart-analysis.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <movable-area style=\"width: 100%; height: 100%\">\r\n      <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n        <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n      </movable-view>\r\n      \r\n      <scroll-view scroll-y style=\"height: 100%;width: 100%;\" @scrolltolower=\"scrolltolower\">\r\n        <view v-if=\"vuex_useInfo.bindEmpType == 2\">\r\n          <view class=\"bgTop u-p-20 cfff u-rela\">\r\n            <view class=\"u-flex u-row-between\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t{{dayDate}}\r\n\t\t\t\t\t\t\t\t<!-- <u-icon name=\"arrow-down-fill\" customStyle=\"margin-left:10rpx;\" @click=\"calendarShow = true\"></u-icon> -->\r\n\t\t\t\t\t\t\t</view>\r\n              <view class=\"u-flex\" @click=\"schemeShow = true\">\r\n                {{scheme}}\r\n                <u-icon name=\"setting\" size=\"36\" color=\"#fff\" customStyle=\"margin:0 20rpx 0 10rpx;\"></u-icon>\r\n              </view>\r\n            </view>\r\n            <view class=\"u-flex u-row-around u-col-center u-text-center u-m-t-60 u-m-b-100\">\r\n              <view>\r\n                <text class=\"fw700 u-font-36\">{{staticObj.totalStudentCount || 0}}</text>\r\n                <view class=\"u-m-t-20\">总人数(人)</view>\r\n              </view>\r\n              <view>\r\n                <text class=\"fw700 u-font-36\">{{staticObj.countRealTotal || 0}}</text>\r\n                <view class=\"u-m-t-20\">在校人数(人)</view>\r\n              </view>\r\n              <view>\r\n                <text class=\"fw700 u-font-36\">{{staticObj.qjCount || 0}}</text>\r\n                <view class=\"u-m-t-20\">请假人数(人)</view>\r\n              </view>\r\n            </view>\r\n\t\t\t\t\t\t\r\n            <view class=\"u-flex u-row-around u-col-center u-flex-wrap u-content-color u-text-center\">\r\n              <view class=\"u-m-b-20 u-width-45\">\r\n                <my-card margin=\"0\" box-shadow=\"0px 4rpx 4rpx #e8e8e8\">\r\n                \t<text>入校人数</text>\r\n                \t<view class=\"u-flex u-row-center u-m-t-20\"><text class=\"u-font-36 fw700\">{{staticObj.inEmpCount || 0}}</text>人</view>\r\n                </my-card>\r\n              </view>\r\n              <view class=\"u-m-b-20 u-width-45\">\r\n\t\t\t\t\t\t\t\t<my-card margin=\"0\" box-shadow=\"0px 4rpx 4rpx #e8e8e8\">\r\n\t\t\t\t\t\t\t\t\t<text>离校人数</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-m-t-20\"><text class=\"u-font-36 fw700\">{{staticObj.outEmpCount || 0}}</text>人</view>\r\n\t\t\t\t\t\t\t\t</my-card>\r\n              </view>\r\n              <view class=\"u-width-45\">\r\n\t\t\t\t\t\t\t\t<my-card margin=\"0\" box-shadow=\"0px 4rpx 4rpx #e8e8e8\">\r\n\t\t\t\t\t\t\t\t\t<text>入校人次</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-m-t-20\"><text class=\"u-font-36 fw700\">{{staticObj.inCount || 0}}</text>次</view>\r\n\t\t\t\t\t\t\t\t</my-card>\r\n              </view>\r\n              <view class=\"u-width-45\">\r\n\t\t\t\t\t\t\t\t<my-card margin=\"0\" box-shadow=\"0px 4rpx 4rpx #e8e8e8\">\r\n\t\t\t\t\t\t\t\t\t<text>离校人次</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-flex u-row-center u-m-t-20\"><text class=\"u-font-36 fw700\">{{staticObj.outCount || 0}}</text>次</view>\r\n\t\t\t\t\t\t\t\t</my-card>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\t\t\t\t\t\r\n          <view>\r\n            <my-card margin=\"0 30rpx\" showHead headBorderBottom :bodyStyle=\"{padding:'0 30rpx'}\" box-shadow=\"0px 4rpx 4rpx #e8e8e8\">\r\n              <view slot=\"head\" class=\"u-flex u-row-between\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-flex\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"shuxian\" custom-prefix=\"custom-icon\"></u-icon>\r\n\t\t\t\t\t\t\t\t\t<text class=\"u-font-32 fw700\">详情</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n                <u-icon \r\n                  name=\"shaixuan1\" \r\n                  custom-prefix=\"custom-icon\" \r\n                  size=\"40\" color=\"#000\" \r\n                  @click=\"classShow = true\"></u-icon>\r\n              </view>\r\n              \r\n              <view v-for=\"(item,index) in inOutRecord\" :key=\"item.id\" class=\"u-p-t-30 u-p-b-30\" style=\"border-bottom: 1rpx dashed #e4e7ed;\">\r\n                <view class=\"u-flex u-row-between u-m-b-30\">\r\n                  <view class=\"u-width-70 u-flex\">\r\n                    <view class=\"u-line-1\" style=\"max-width: 55%;\">{{item.gradeName + item.className}}</view>：应到 \r\n                    <text class=\"fw700\">{{item.classStudentCount}} 人</text>\r\n                  </view>\r\n                  <view class=\"u-flex u-content-color\" @click=\"$u.route('/pageMj/in-out-details/in-out-details',{dayDate:dayDate,classId:item.classId,schemaCode:schemaCode})\">\r\n                    查看详情<u-icon name=\"arrow-right\" customStyle=\"margin-left:10rpx;\"></u-icon>\r\n                  </view>\r\n                </view>\r\n                <view class=\"u-flex u-row-around\">\r\n                  <view class=\"u-text-center\">\r\n                    <text>请假</text>\r\n                    <view class=\"u-m-t-4 fw700\" :class=\"[item.qjCount > 0 ? 'u-error' : '']\">{{item.qjCount}}人</view>\r\n                  </view>\r\n                  <view class=\"u-text-center\">\r\n                    <text>在校</text>\r\n                    <view class=\"u-m-t-4 fw700\" :class=\"[item.inEmpCount > 0 ? 'u-error' : '']\">{{item.inEmpCount}}人</view>\r\n                  </view>\r\n                  <view class=\"u-text-center\">\r\n                    <text>不在校</text>\r\n                    <view class=\"u-m-t-4 fw700\" :class=\"[item.classStudentCount - item.inEmpCount > 0 ? 'u-error' : '']\">{{item.classStudentCount - item.inEmpCount}}人</view>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n            </my-card>\r\n          </view>\r\n        </view>\r\n        \r\n        <u-loadmore :status=\"loadStatus\" icon-type=\"flower\" v-if=\"inOutRecord.length > 0\" />\r\n      </scroll-view>\r\n    </movable-area>\r\n\t\t\r\n\t\t<u-action-sheet\r\n\t\t\t:show=\"schemeShow\" \r\n\t\t\t:actions=\"schemeList\"\r\n\t\t\ttitle=\"请选择\"\r\n\t\t\t@close=\"schemeShow = false\"\r\n\t\t\t@select=\"schemeConfirm\"></u-action-sheet>\r\n\t\t\r\n\t\t<!-- <u-calendar :show=\"calendarShow\" @change=\"calendarChange\"></u-calendar> -->\r\n\t\t\r\n\t\t<u-popup :show=\"classShow\" mode=\"bottom\" closeable @close=\"classShow = false\">\r\n\t\t  <view class=\"u-menu-wrap\">\r\n\t\t  \t<scroll-view scroll-y scroll-with-animation class=\"u-tab-view menu-scroll-view\" :scroll-top=\"scrollTop\">\r\n\t\t  \t\t<view \r\n\t\t        v-for=\"(item,index) in gradeClassArr\" :key=\"index\" \r\n\t\t\t\t\t\tclass=\"u-tab-item\" :class=\"[ClassCurrent==index ? 'u-tab-item-active' : '']\"\r\n\t\t        :data-current=\"index\" @tap.stop=\"swichMenu(index)\">\r\n\t\t  \t\t\t<text class=\"u-line-1\">{{item.label}}</text>\r\n\t\t  \t\t</view>\r\n\t\t  \t</scroll-view>\r\n\t\t  \t<block v-for=\"(item,index) in gradeClassArr\" :key=\"index\">\r\n\t\t  \t\t<scroll-view scroll-y class=\"bgfff\" v-if=\"ClassCurrent==index\">\r\n\t\t  \t\t\t<view class=\"u-p-16\">\r\n\t\t  \t\t\t\t<view class=\"u-m-b-20 u-borderR-8 bgfff u-p-16\" v-for=\"(item1, index1) in item.children\" :key=\"index1\">\r\n\t\t  \t\t\t\t\t<view class=\"item-title u-main-color u-font-26 fw700\">\r\n\t\t  \t\t\t\t\t\t<text>{{item1.label}}</text>\r\n\t\t  \t\t\t\t\t</view>\r\n\t\t  \t\t\t\t\t<view class=\"u-flex u-flex-wrap\">\r\n\t\t  \t\t\t\t\t\t<view \r\n\t\t                class=\"thumb-box\" :class=\"activeArr.includes(item2.id) ? 'activeItem' : ''\"\r\n\t\t                v-for=\"(item2, index2) in item1.children\" :key=\"index2\" \r\n\t\t                @click=\"selectClass(item2)\">\r\n\t\t  \t\t\t\t\t\t\t<view class=\"u-font-24\">{{item2.label}}</view>\r\n\t\t  \t\t\t\t\t\t</view>\r\n\t\t  \t\t\t\t\t</view>\r\n\t\t  \t\t\t\t</view>\r\n\t\t  \t\t\t</view>\r\n\t\t  \t\t</scroll-view>\r\n\t\t  \t</block>\r\n\t\t  </view>\r\n\t\t  <view class=\"u-p-30 u-flex\" style=\"border-top: 10rpx solid #f6f6f6;\">\r\n\t\t    <u-button type=\"info\" customStyle=\"margin-right:20rpx;\" @click=\"activeArr = []\">重置</u-button>\r\n\t\t    <u-button type=\"primary\" @click=\"selectClassSubmit\">完成</u-button>\r\n\t\t  </view>\r\n\t\t</u-popup>\r\n  </view>\n</template>\n\n<script>\r\n  import { teacherMjStatic, classInOutData, mjList } from '../mj.js';\r\n  import { getGradeClassData} from '@/api/common/index.js'\r\n  \r\n  export default{\r\n    data(){\r\n      return{\r\n        dayDate:uni.$u.timeFormat(new Date(), 'yyyy-mm-dd'),\r\n        calendarShow:false,\r\n\t\t\t\tscheme:\"\",\r\n\t\t\t\tschemaCode:\"\",\r\n\t\t\t\tschemeShow:false,\r\n\t\t\t\tschemeList:[],\r\n\t\t\t\tstaticObj:{inCount:0,inEmpCount:0,outCount:0,outEmpCount:0,qjCount:0,totalStudentCount:0},\r\n\t\t\t\tinOutRecord:[],\r\n\t\t\t\tpageCount: 1,\r\n\t\t\t\tcurrent: 1,\r\n\t\t\t\tloadStatus: 'nomore',\r\n\t\t\t\t\r\n        classShow:false,\r\n        gradeClassArr:[],\r\n        scrollTop: 0, //tab标题的滚动条位置\r\n        ClassCurrent: 0, // 预设当前项的值\r\n        menuHeight: 0, // 左边菜单的高度\r\n        menuItemHeight: 0, // 左边菜单item的高度\r\n        activeArr:[],\r\n      }\r\n    },\r\n    onLoad() {\r\n      (async () => {\r\n        await this.getSchemeList();\r\n        this.search()\r\n        this.getTeacherMjStaticData();\r\n        getGradeClassData().then(r => {\r\n          var treeDatas = this.data2tree(r.data.data);\r\n          this.gradeClassArr = treeDatas;\r\n        })\r\n      })()\r\n    },\r\n    methods:{\r\n      getSchemeList(){\r\n        return new Promise((resolve) => {\r\n          mjList().then(res => {\r\n\t\t\t\t\t\tlet data = res.data.data?.schemaList;\r\n\t\t\t\t\t\tif(data && data.length){\r\n\t\t\t\t\t\t\tthis.schemeList = data.map(v => ({ name:v.schemaName, value:v.schemaCode }));\r\n\t\t\t\t\t\t\tthis.scheme = data[0].schemaName;\r\n\t\t\t\t\t\t\tthis.schemaCode = data[0].schemaCode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve()\r\n          });\r\n        })\r\n      },\r\n      search(){\r\n        this.pageCount = 0\r\n        this.current = 1\r\n        this.inOutRecord = []\r\n        this.initData()\r\n      },\r\n      initData() {\r\n        let params = {}\r\n        params['dayDate'] = this.dayDate;\r\n        params['size'] = 10;\r\n        params['current'] = this.current;\r\n        params['classIds'] = this.activeArr.join(',');\r\n        params['schemaCode'] = this.schemaCode;\r\n        classInOutData(params).then(r => {\r\n          if(r.data.code == 200){\r\n            let d = r.data.data\r\n            this.pageCount = d.pages\r\n            this.inOutRecord = [...this.inOutRecord,...d.records]\r\n          }\r\n        })\r\n      },\r\n      getTeacherMjStaticData(){\r\n        teacherMjStatic({schemaCode:this.schemaCode}).then(r => {\r\n          this.staticObj = r.data.data\r\n        })\r\n      },\r\n      selectClassSubmit(){\r\n        this.classShow = false;\r\n        this.search()\r\n      },\r\n      selectClass(item){\r\n        if(this.activeArr.includes(item.id)){\r\n          this.activeArr.splice(this.activeArr.findIndex(v => v === item.id), 1)\r\n        }else{\r\n          this.activeArr.push(item.id)\r\n        }\r\n      },\r\n      // 点击左边的栏目切换\r\n      async swichMenu(index) {\r\n      \tif(index == this.ClassCurrent) return ;\r\n      \tthis.ClassCurrent = index;\r\n      \t// 如果为0，意味着尚未初始化\r\n      \tif(this.menuHeight == 0 || this.menuItemHeight == 0) {\r\n      \t\tawait this.getElRect('menu-scroll-view', 'menuHeight');\r\n      \t\tawait this.getElRect('u-tab-item', 'menuItemHeight');\r\n      \t}\r\n      \t// 将菜单菜单活动item垂直居中\r\n      \tthis.scrollTop = index * this.menuItemHeight + this.menuItemHeight / 2 - this.menuHeight / 2;\r\n      },\r\n      // 获取一个目标元素的高度\r\n      getElRect(elClass, dataVal) {\r\n      \tnew Promise((resolve, reject) => {\r\n      \t\tconst query = uni.createSelectorQuery().in(this);\r\n      \t\tquery.select('.' + elClass).fields({size: true},res => {\r\n      \t\t\t// 如果节点尚未生成，res值为null，循环调用执行\r\n      \t\t\tif(!res) {\r\n      \t\t\t\tsetTimeout(() => {\r\n      \t\t\t\t\tthis.getElRect(elClass);\r\n      \t\t\t\t}, 10);\r\n      \t\t\t\treturn ;\r\n      \t\t\t}\r\n      \t\t\tthis[dataVal] = res.height;\r\n      \t\t}).exec();\r\n      \t})\r\n      },\r\n      data2tree(datas) {\r\n        let obj = {};\r\n        let newArr = datas.reduce((cur,next) => {\r\n          obj[next.schoolId] ? \"\" : obj[next.schoolId] = true && cur.push({\r\n            id: next.schoolId,\r\n            label: next.schoolName,\r\n            type:1\r\n          });\r\n          return cur;\r\n        },[]) \r\n        return this.data2treeDG(datas, newArr);\r\n      },\r\n      data2treeDG(datas, dataArray) {\r\n        for(var j = 0; j < dataArray.length; j++) {\r\n          var dataArrayIndex = dataArray[j];\r\n          var childrenArray = [];\r\n          var parentId = dataArrayIndex.id;\r\n          for(var i = 0; i < datas.length; i++) {\r\n            var data = datas[i];\r\n            var schoolId = data.schoolId;\r\n            if(schoolId == parentId) {//判断是否为儿子节点\r\n              var objTemp = {\r\n                id:data.gradeId,\r\n                label:data.gradeName,\r\n                type:2,\r\n                parentId:parentId\r\n              }\r\n              childrenArray.push(objTemp);\r\n            }\r\n          }\r\n          let obj = {};\r\n          let newArr = childrenArray.reduce((cur,next) => {\r\n            obj[next.id] ? \"\" : obj[next.id] = true && cur.push(next);\r\n            return cur;\r\n          },[]) \r\n          dataArrayIndex.children = newArr;\r\n          if(childrenArray.length > 0) {//有儿子节点则递归\r\n            this.data3treeDG(datas, childrenArray);\r\n          }\r\n        }\r\n        return dataArray;\r\n      },\r\n      data3treeDG(datas, dataArray) {\r\n        for(var j = 0; j < dataArray.length; j++) {\r\n          var dataArrayIndex = dataArray[j];\r\n          var childrenArray = [];\r\n          var parentId = dataArrayIndex.id;\r\n          for(var i = 0; i < datas.length; i++) {\r\n            var data = datas[i];\r\n            var gradeId = data.gradeId;\r\n            if(gradeId == parentId) {//判断是否为儿子节点\r\n              var objTemp = {\r\n                id:data.classId,\r\n                label:data.className,\r\n                type:3,\r\n                parentId:parentId\r\n              }\r\n              childrenArray.push(objTemp);\r\n            }\r\n          }\r\n          dataArrayIndex.children = childrenArray;\r\n        }\r\n        return dataArray;\r\n      },\r\n      calendarChange(val){\r\n        this.dayDate = val.result;\r\n        this.current = 1\r\n        this.pageCount = 0\r\n      },\r\n      scrolltolower() {\r\n        if (this.current >= this.pageCount) {\r\n          this.loadStatus = 'nomore';\r\n        } else {\r\n          this.current = ++this.current;\r\n          this.initData();\r\n        }\r\n      },\r\n      schemeConfirm(v) {\r\n        this.scheme = v.name;\r\n        this.schemaCode = v.value;\r\n        this.search()\r\n        this.getTeacherMjStaticData();\r\n      },\r\n      backClick() {\r\n        uni.switchTab({ url: '/pages/index/index' });\r\n      }\r\n    },\r\n  }\n</script>\n\n<style lang=\"scss\" scoped>\r\n  .bgTop{\r\n    background: url(http://qs.aiwld.com.cn/static/app/bg6.png) no-repeat;\r\n    background-size: 100%;\r\n  }\r\n  .u-menu-wrap {\r\n    height: 600rpx;\r\n  \tdisplay: flex;\r\n  \toverflow: hidden;\r\n  }\r\n  .u-tab-view {\r\n  \twidth: 200rpx;\r\n  \theight: 100%;\r\n  }\r\n  .u-tab-item {\r\n  \theight: 110rpx;\r\n  \tbackground: #f6f6f6;\r\n  \tbox-sizing: border-box;\r\n  \tdisplay: flex;\r\n  \talign-items: center;\r\n  \tjustify-content: center;\r\n  \tfont-size: 26rpx;\r\n  \tcolor: #444;\r\n  \tfont-weight: 400;\r\n  \tline-height: 1;\r\n  }\r\n  .u-tab-item-active {\r\n  \tposition: relative;\r\n  \tcolor: #000;\r\n  \tfont-size: 30rpx;\r\n  \tfont-weight: 600;\r\n  \tbackground: #fff;\r\n  }\r\n  .u-tab-item-active::before {\r\n  \tcontent: \"\";\r\n  \tposition: absolute;\r\n  \tborder-left: 4px solid $u-primary;\r\n  \theight: 100%;\r\n  \tleft: 0;\r\n  \ttop: 0;\r\n  }\r\n  .u-tab-view {\r\n  \theight: 100%;\r\n  }\r\n  .thumb-box {\r\n  \twidth: 31%;\r\n  \tdisplay: flex;\r\n  \talign-items: center;\r\n  \tflex-direction: column;\r\n  \tmargin-top: 20rpx;\r\n    border: 1rpx solid #ccc;\r\n    margin-right: 4px;\r\n    padding: 10rpx 0;\r\n    border-radius: 10rpx;\r\n  }\r\n  .activeItem{\r\n    background-color: #2979ff;\r\n    color: #FFFFFF !important;\r\n    border-color: #2979ff;\r\n  }\r\n  .colorRed{\r\n    color: #FA3534;\r\n  }\n</style>\n","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chart-analysis.vue?vue&type=style&index=0&id=7770e2da&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chart-analysis.vue?vue&type=style&index=0&id=7770e2da&lang=scss&scoped=true&\""],"sourceRoot":""}