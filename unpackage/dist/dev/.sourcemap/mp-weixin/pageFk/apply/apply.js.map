{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pageFk/apply/apply.vue?c7ff","webpack:///F:/HWD/test/pageFk/apply/apply.vue?a8d1","webpack:///F:/HWD/test/pageFk/apply/apply.vue?d297","webpack:///F:/HWD/test/pageFk/apply/apply.vue?1872","uni-app:///pageFk/apply/apply.vue","webpack:///F:/HWD/test/pageFk/apply/apply.vue?8f67"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","uForm","myCard","uFormItem","uInput","uCheckboxGroup","uCheckbox","myButton","uPopup","uParse","uActionSheet","uKeyboard","uDatetimePicker","wPicker","uOverlay","uToast","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","vuex_useInfo","bindEmpType","visitList","length","l0","__map","item","index","$orig","__get_orig","g1","visitorName","g2","substr","g3","Date","getTime","g4","_isMounted","e0","$event","visitDateShow","e1","visitAreaShow","e2","keyboardNumShow","e3","popupshow","e4","e5","actionSheetShow","e6","e7","e8","e9","e10","departureDateShow","e11","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","form","visitorCompany","visitorTime","levalTime","visitArea","visitorCause","visitorPersonCount","invitationMinuteExpire","lefticonstyle","visitMindate","departureMinDate","departureMaxDate","defaultLeaveTime","betweenTime","visitAreaList","visitReasonsList","visitorMaxEmpNum","invitationMinuteExpireShow","invitationMinuteExpireList","value","name","actionSheetData","actionSheetTitle","agreement","strings","btnDisabled","maskShow","maxDays","dateType","applyForms","type","rules","interviewees","required","trigger","visitors","validator","visitorTimeLabel","levalTimeLabel","onLoad","onReady","uni","title","methods","btnClick","end","icon","setTimeout","visitorNo","initPageData","intervieweesClick","visitClick","deleteClick","visitorCompanyBlur","visitDateConfirm","levalTimeClick","departureDateConfirm","visitAreaConfirm","handlerSelect","actionSheetChange","visitorPersonCountChange","visitorPersonCountBackspace","checkboxChange","phoneClick","phoneNumber","backClick","url"],"mappings":"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,uCAEA9F,oBACA4F,4BAEAjC,iBACAgC,YACA3F,kBACA4F,4BAEAhC,cACA+B,YACA3F,kBACA4F,4BAEA/B,YACA8B,YACA3F,kBACA4F,4BAEA9B,YACA6B,YACA3F,kBACA4F,4BAEA7B,eACA4B,YACA3F,kBACA4F,iBAEA5B,qBACA2B,YACA3F,gBACA4F,4BAEA3B,yBACA0B,YACA3F,uBAGA+F,oBACAC,oBAGAC,mBACA,IACA,wCACA,MACA,2BACA,sGACA,qDAEA,2DACA,yDACA,cACA,4BAEA,kCACA,0CACA,oCACA,gCACA,gCACA,2CACA,sCACA,kDACA,oEACA,0DACA,mBAEA,SACA/F,eAEA,qBAEAgG,mBACA,sCACA,iCACAC,yBAAAC,gBAEAD,yBAAAC,gBAGAC,SACAC,qBAAA,WACA,6CACA,2CACA,6BACA,4BACA5C,kCACAA,8BACA,wDACA6C,kDACA,MACA,qBACA,4BACAvG,uCACAwF,aACAgB,UAIA,8BACA,WACA,8CAAAlB,oBAAAZ,uCAEA,eACA,iCACA,cACA,iBACAyB,qCACAA,wCACA,qBAAAnG,mBAAAwF,iBACAiB,uBACA,gBACA,QACA,mBACA,cACA,qBAAAzG,UAAAwF,aAAAgB,eAKA,eACA,6CACA,cACA,iBACAL,qCACA,qBAAAnG,mBAAAwF,iBACAiB,uBACA,sDAAAC,oCACA,QACA,mBACA,cACA,qBAAA1G,UAAAwF,aAAAgB,kBAMAG,wBAAA,WACA,sBACA,0BACA,mCACA,qBACA,kBACA,gCACA,uCACA,uDACA,2DACA,oDACA,+CAEA,yDACA,sBACAxD,eACA,kCAAA0B,QAAAC,WACA,0BAKA8B,6BACA,oDAGAC,sBACA,0CAGAC,wBACA,2BACA,kCACA,yCACAX,qCACAA,mDAEAY,+BACA,2BACA,iCACAZ,mDAGAa,6BACA,+BACA,kDACA,wBACA,8BAEA,yCACA,+DACA,+CAGA,OAFA,sBACA,wBAAAhH,2DAAAwF,eAAAgB,WACA,EAEA,uCACA,mCACA,2CAEA,0DACA,iEAEA,sBAEA,2BACA,4CACA,wBACA,8BACA,sBACA,4BACA,sBAEAL,kDACA,qBAEAc,0BACA,4BACA,qCAAAjH,oBAAAwF,eAAAgB,UAEA,+CACA,wBACA,iDACA,yDAEA,oBACA,8BAGA,OAFA,+DACA,2BACA,EAEA,+BACA,mBACA,uDACA,8BACA,CACA,qEACA,wBACA,4BAIAU,iCACA,+BACA,mEAEA,0FAEA,OADA,0BACA,wBAAAlH,uBAAAwF,eAAAgB,UAEA,yCAGA,OAFA,0BACA,wBAAAxG,2DAAAwF,eAAAgB,WACA,EAGA,0FACA,sBACA,4BACAL,kDACA,2BAGAgB,6BAEA,uBACA,6BAiBA,6BACA,mCACA,sCACA,4CACA,oBACAhB,mDAEAiB,0BACA,qBACA,gCACA,4CAEA,+BACA,kCACA,sDAEA,kBACA,yBAEAC,8BACA,mCACA,iCACA,oCACAlB,mDAEA,6CACA,6CACA,yCACA,sDACA,mDACA,+CACAA,oDAGAmB,qCACA,oEACA,6BACA,+CACA,wCACAnB,oDAGAoB,uCACA,sCACA,0GACA,gEACApB,oDAIAqB,2BACA,2BAEAC,uBACAtB,iBAAAuB,iBAEAC,qBACAxB,aAAAyB,8BAGA,c,6DC5lBA,yHAAm8B,eAAG,G","file":"pageFk/apply/apply.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageFk/apply/apply.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./apply.vue?vue&type=template&id=1fb88cc0&scoped=true&\"\nvar renderjs\nimport script from \"./apply.vue?vue&type=script&lang=js&\"\nexport * from \"./apply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./apply.vue?vue&type=style&index=0&id=1fb88cc0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fb88cc0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageFk/apply/apply.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./apply.vue?vue&type=template&id=1fb88cc0&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form/u-form\" */ \"@/uni_modules/uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group\" */ \"@/uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group.vue\"\n      )\n    },\n    uCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-checkbox/u-checkbox\" */ \"@/uni_modules/uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    myButton: function () {\n      return import(\n        /* webpackChunkName: \"components/my-button\" */ \"@/components/my-button.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-parse/u-parse\" */ \"@/uni_modules/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uActionSheet: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-action-sheet/u-action-sheet\" */ \"@/uni_modules/uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    },\n    uKeyboard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-keyboard/u-keyboard\" */ \"@/uni_modules/uview-ui/components/u-keyboard/u-keyboard.vue\"\n      )\n    },\n    uDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker\" */ \"@/uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker.vue\"\n      )\n    },\n    wPicker: function () {\n      return import(\n        /* webpackChunkName: \"components/w-picker/w-picker\" */ \"@/components/w-picker/w-picker.vue\"\n      )\n    },\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.vuex_useInfo.bindEmpType != 2 ? _vm.visitList.length : null\n  var l0 =\n    _vm.vuex_useInfo.bindEmpType != 2 && g0 > 0\n      ? _vm.__map(_vm.visitList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g1 = item.visitorName.length\n          var g2 = g1 > 8 ? item.visitorName.substr(0, 8) : null\n          return {\n            $orig: $orig,\n            g1: g1,\n            g2: g2,\n          }\n        })\n      : null\n  var g3 = new Date(\"2050/05/31\").getTime()\n  var g4 = new Date().getTime()\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.visitDateShow = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.visitAreaShow = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.keyboardNumShow = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.popupshow = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.popupshow = false\n    }\n    _vm.e5 = function ($event) {\n      _vm.actionSheetShow = false\n    }\n    _vm.e6 = function ($event) {\n      _vm.keyboardNumShow = false\n    }\n    _vm.e7 = function ($event) {\n      _vm.keyboardNumShow = false\n    }\n    _vm.e8 = function ($event) {\n      _vm.visitDateShow = false\n    }\n    _vm.e9 = function ($event) {\n      _vm.visitDateShow = false\n    }\n    _vm.e10 = function ($event) {\n      _vm.departureDateShow = false\n    }\n    _vm.e11 = function ($event) {\n      _vm.departureDateShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./apply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./apply.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <movable-area style=\"width: 100%; height: 100%\">\r\n      <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n        <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n      </movable-view>\r\n\t\t\t\r\n      <scroll-view scroll-y style=\"height: 100%;width: 100%;\">\r\n        <u-form :model=\"form\" ref=\"uForm\" :border-bottom=\"false\" label-width=\"140\">\r\n          <my-card margin=\"0 20rpx\" padding=\"10rpx 30rpx\">\r\n\t\t\t\t\t\t<u-form-item prop=\"interviewees\" class=\"formItem\" :border-bottom=\"false\" @click=\"intervieweesClick\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-text-center u-m-r-20\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"gongdan-beifangre1\" custom-prefix=\"custom-icon\" />\r\n\t\t\t\t\t\t\t\t\t<view>被访人</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<u-input v-model=\"form.interviewees\" disabled disabledColor=\"#ffffff\" placeholder=\"请添加\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-form-item>\r\n          </my-card>\r\n\r\n          <my-card v-if=\"vuex_useInfo.bindEmpType != 2\" padding=\"10rpx 30rpx\">\r\n            <u-form-item prop=\"visitors\" class=\"formItem\" :border-bottom=\"false\">\r\n              <view class=\"u-flex\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-text-center u-m-r-20\">\r\n\t\t\t\t\t\t\t\t  <u-icon name=\"gongdan-fangke1\" custom-prefix=\"custom-icon\" />\r\n\t\t\t\t\t\t\t\t  <view>来访人</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-model=\"form.visitors\" v-if=\"visitList.length > 0\" style=\"flex: 1;\">\r\n\t\t\t\t\t\t\t\t  <view \r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in visitList\" :key=\"index\" \r\n\t\t\t\t\t\t\t\t\t\tclass=\"u-border-bottom u-flex u-row-between u-p-t-20 u-p-b-20 u-m-b-10\">\r\n\t\t\t\t\t\t\t\t    <text class=\"u-flex-12 fw700\" style=\"color: #121212;\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ item.visitorName.length > 8 ? item.visitorName.substr(0,8)+'...' : item.visitorName }} {{ item.visitorPhone }}\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t    <u-icon size=\"50\" color=\"#c0c4cc\" name=\"minus-circle\" @click=\"deleteClick(index)\"></u-icon>\r\n\t\t\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t\t\t  <view class=\"u-border-bottom u-flex u-row-between u-p-t-20 u-p-b-20\" @click=\"visitClick\">\r\n\t\t\t\t\t\t\t\t    <text>添加来访人员</text>\r\n\t\t\t\t\t\t\t\t    <u-icon size=\"50\" color=\"#c0c4cc\" name=\"plus-circle\"></u-icon>\r\n\t\t\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-else @click=\"visitClick\">\r\n\t\t\t\t\t\t\t\t\t<u-input disabled disabledColor=\"#ffffff\" placeholder=\"请添加\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n            </u-form-item>\r\n          </my-card>\r\n\r\n          <my-card>\r\n            <u-form-item\r\n            \tv-if=\"vuex_useInfo.bindEmpType != 2\"\r\n              label=\"来访单位\" label-width=\"200rpx\" \r\n              prop=\"visitorCompany\" \r\n              leftIcon=\"grid\" :leftIconStyle=\"lefticonstyle\" \r\n              class=\"formItem\"\r\n\t\t\t\t\t\t\t@blur=\"visitorCompanyBlur\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"edit-pen\" color=\"#c0c4cc\"></u-icon>\r\n              <u-input v-model.trim=\"form.visitorCompany\" placeholder=\"请填写\" input-align=\"right\" maxlength=\"50\" />\r\n            </u-form-item>\r\n            <u-form-item \r\n              label=\"到访时间\" label-width=\"200rpx\" \r\n              prop=\"visitorTime\" \r\n              leftIcon=\"calendar\" :leftIconStyle=\"lefticonstyle\" \r\n              class=\"formItem\"\r\n\t\t\t\t\t\t\t@click=\"visitDateShow = true;\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n              <u-input v-model=\"form.visitorTime\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" input-align=\"right\" />\r\n            </u-form-item>\r\n            \r\n            <u-form-item \r\n              label=\"离访时间\" label-width=\"200rpx\" \r\n              prop=\"levalTime\" \r\n              leftIcon=\"calendar\" :leftIconStyle=\"lefticonstyle\" \r\n              class=\"formItem\"\r\n\t\t\t\t\t\t\t@click=\"levalTimeClick\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n              <u-input v-model=\"form.levalTime\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" input-align=\"right\" />\r\n            </u-form-item>\r\n            \r\n            <u-form-item \r\n              label=\"到访区域\" label-width=\"200rpx\" \r\n              prop=\"visitArea\" \r\n              leftIcon=\"map\" :leftIconStyle=\"lefticonstyle\" \r\n              class=\"formItem\"\r\n\t\t\t\t\t\t\t@click=\"visitAreaShow = true\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n              <u-input v-model=\"form.visitArea\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" input-align=\"right\" />\r\n            </u-form-item>\r\n            \r\n            <u-form-item\r\n              label=\"到访事由\" label-width=\"200rpx\"\r\n              prop=\"visitorCause\"\r\n              leftIcon=\"list\" :leftIconStyle=\"lefticonstyle\"\r\n              class=\"formItem\"\r\n\t\t\t\t\t\t\t@click=\"handlerSelect('visitorCause')\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n              <u-input v-model=\"form.visitorCause\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" input-align=\"right\" />\r\n            </u-form-item>\r\n          </my-card>\r\n\r\n          <my-card v-if=\"vuex_useInfo.bindEmpType == 2\">\r\n          \t<u-form-item\r\n          \t\tlabel=\"人数\" \r\n          \t\tprop=\"visitorPersonCount\" \r\n          \t\tleftIcon=\"account\" :leftIconStyle=\"lefticonstyle\" \r\n          \t\tclass=\"formItem\"\r\n\t\t\t\t\t\t\t@click=\"keyboardNumShow = true\" >\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"edit-pen\" color=\"#c0c4cc\"></u-icon>\r\n          \t\t<u-input v-model=\"form.visitorPersonCount\" :placeholder=\"`最大可填人数${visitorMaxEmpNum}人`\"input-align=\"right\" disabled disabledColor=\"#ffffff\" />\r\n          \t</u-form-item>\r\n          \t\r\n          \t<u-form-item \r\n          \t\tlabel=\"邀请有效时长\" label-width=\"240\"\r\n          \t\tprop=\"invitationMinuteExpire\" \r\n          \t\tleftIcon=\"clock\" :leftIconStyle=\"lefticonstyle\" \r\n          \t\tclass=\"formItem\" \r\n\t\t\t\t\t\t\t@click=\"handlerSelect('invitationMinuteExpire')\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n          \t\t<u-input v-model=\"form.invitationMinuteExpireLabel\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" input-align=\"right\" />\r\n          \t</u-form-item>\r\n          </my-card>\r\n        </u-form>\r\n\t\t\t\r\n\t\t\t\t<view style=\"padding-bottom: 160rpx;\">\r\n\t\t\t\t\t<view class=\"agreement\">\r\n\t\t\t\t\t\t<u-checkbox-group v-model=\"agreement\" @change=\"checkboxChange\" size=\"38\">\r\n\t\t\t\t\t\t\t<u-checkbox name=\"isAgreement\" iconSize=\"30\"></u-checkbox>\r\n\t\t\t\t\t\t</u-checkbox-group>\r\n\t\t\t\t\t\t<view class=\"u-p-l-6 u-flex\" @click=\"popupshow = true\">\r\n\t\t\t\t\t\t\t勾选代表同意\r\n\t\t\t\t\t\t\t<text class=\"c007AFF u-m-l-6\">《注意事项》</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t\t<view class=\"u-m-t-30 u-m-l-60 u-tips-color u-flex\">\r\n\t\t\t\t\t\t<u-icon name=\"server-fill\" size=\"40\" class=\"u-m-r-4\"></u-icon>技术支持:\r\n\t\t\t\t\t\t<text class=\"u-m-r-30 u-m-l-20 c007AFF\" @click=\"phoneClick('15353510079')\">15353510079</text>\r\n\t\t\t\t\t\t<text class=\"c007AFF\" @click=\"phoneClick('13720614891')\">13720614891</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\t\r\n    </movable-area>\r\n\t\t\r\n\t\t<my-button @click=\"btnClick\" stype=\"even\" v-if=\"vuex_useInfo.bindEmpType != 2\" :disabled=\"btnDisabled\">\r\n\t\t\t<template slot=\"left\">邀请多人随行</template>\r\n\t\t\t发起预约\r\n\t\t</my-button>\r\n\t\t<my-button @click=\"btnClick\" v-if=\"vuex_useInfo.bindEmpType == 2\" :disabled=\"btnDisabled\">发起邀约</my-button>\r\n\t\t\r\n\t\t<u-popup :show=\"popupshow\" mode=\"bottom\" height=\"50%\" closeable @close=\"popupshow = false\">\r\n\t\t\t<view class=\"u-text-center u-p-20 u-font-30 bgfff\" style=\"position: fixed;z-index: 2;width: 100%;\">注意事项</view>\r\n\t\t\t<view style=\"padding: 82rpx 30rpx 20rpx;\">\r\n\t\t\t\t<u-parse :content=\"strings\"></u-parse>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t\r\n\t\t<u-action-sheet\r\n\t\t\t:show=\"actionSheetShow\" \r\n\t\t\t:actions=\"actionSheetData\"\r\n\t\t\t:title=\"actionSheetTitle\"\r\n\t\t\t@close=\"actionSheetShow = false\"\r\n\t\t\t@select=\"actionSheetChange\"></u-action-sheet>\r\n\t\t<u-keyboard\r\n\t\t  ref=\"uKeyboard\" \r\n\t\t  mode=\"number\"\r\n\t\t  :show=\"keyboardNumShow\"\r\n\t\t  @change=\"visitorPersonCountChange\" \r\n\t\t  @backspace=\"visitorPersonCountBackspace\"\r\n\t\t\t@cancel=\"keyboardNumShow = false\"\r\n\t\t\t@confirm=\"keyboardNumShow = false\"></u-keyboard>\r\n\t\t<u-datetime-picker \r\n\t\t\t:mode=\"dateType === 'datetime' ? 'datetime' : 'date'\"\r\n\t\t\t:show=\"visitDateShow\" v-model=\"visitorTimeLabel\"\r\n\t\t\t:maxDate=\"new Date('2050/05/31').getTime()\"\r\n\t\t\t:minDate=\"new Date().getTime()\"\r\n\t\t\t@confirm=\"visitDateConfirm\"\r\n\t\t\t@cancel=\"visitDateShow = false\"\r\n\t\t\t@close=\"visitDateShow = false\"\r\n\t\t></u-datetime-picker>\r\n\t\t<u-datetime-picker\r\n\t\t\t:mode=\"dateType === 'datetime' ? 'datetime' : 'date'\"\r\n\t\t\t:show=\"departureDateShow\" v-model=\"levalTimeLabel\"\r\n\t\t\t:minDate=\"departureMinDate\"\r\n\t\t\t:maxDate=\"departureMaxDate\"\r\n\t\t\t@confirm=\"departureDateConfirm\"\r\n\t\t\t@cancel=\"departureDateShow = false\"\r\n\t\t\t@close=\"departureDateShow = false\"\r\n\t\t></u-datetime-picker>\r\n\t\t<w-picker\r\n\t\t  :visible.sync=\"visitAreaShow\"\r\n\t\t  mode=\"linkage\"\r\n\t\t  :options=\"visitAreaList\"\r\n\t\t  :level=\"3\"\r\n\t\t  default-type=\"value\"\r\n\t\t  @confirm=\"visitAreaConfirm\"\r\n\t\t  ref=\"linkage\" ></w-picker>\r\n\t\t\t\r\n\t\t<u-overlay :show=\"maskShow\">\r\n\t\t\t<view class=\"w-overlay\">正在提交，请等待...</view>\r\n\t\t</u-overlay>\r\n\t\t<u-toast ref=\"uToast\" />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { deleteEmptyArr } from '@/utils/my_function.js'\r\nimport { initFkCfg } from '@/api/common/index.js';\r\nimport { submit, targetInviteSubmit } from '../api/apply.js';\r\nimport wPicker from \"@/components/w-picker/w-picker.vue\";\r\n\r\nexport default {\r\n\tcomponents:{ wPicker },\r\n  data() {\r\n    return {\r\n      form: {visitorCompany:\"\",visitorTime:\"\",levalTime:\"\",visitArea:\"\",visitorCause:\"\",visitorPersonCount:\"\",invitationMinuteExpire:\"\"},\r\n\t\t\tlefticonstyle: { 'font-size': '34rpx' },\r\n\t\t\tvisitList: [],\r\n\t\t\tvisitDateShow: false,\r\n\t\t\tvisitMindate: uni.$u.timeFormat(new Date()),\r\n\t\t\tdepartureDateShow: false,\r\n\t\t\tdepartureMinDate: '',\r\n\t\t\tdepartureMaxDate: '',\r\n\t\t\tdefaultLeaveTime:'23:59:59',\r\n\t\t\tbetweenTime:4,\r\n\t\t\tvisitAreaList: [],\r\n\t\t\tvisitAreaShow: false,\r\n\t\t\tvisitReasonsList: [],\r\n\t\t\tvisitorMaxEmpNum:99,\r\n\t\t\tkeyboardNumShow:false,\r\n\t\t\tinvitationMinuteExpireShow:false,\r\n\t\t\tinvitationMinuteExpireList:[\r\n\t\t\t\t{value:0,name:\"离访时间\"},\r\n\t\t\t\t{value:10,name:\"10分钟\"},\r\n\t\t\t\t{value:20,name:\"20分钟\"},\r\n\t\t\t\t{value:30,name:\"30分钟\"},\r\n\t\t\t\t{value:40,name:\"40分钟\"},\r\n\t\t\t\t{value:50,name:\"50分钟\"},\r\n\t\t\t\t{value:60,name:\"60分钟\"}\r\n\t\t\t],\r\n\t\t\tactionSheetShow:false,\r\n\t\t\tactionSheetData:[],\r\n\t\t\tactionSheetTitle:'',\r\n\t\t\t\r\n      agreement: false,\r\n      popupshow: false,\r\n\t\t\tstrings: '',\r\n\t\t\tbtnDisabled:false,\r\n\t\t\tmaskShow: false,\r\n\t\t\tmaxDays: '',\r\n\t\t\tdateType:\"date\",\r\n\t\t\tapplyForms: {},\r\n      type: 'select',\r\n      rules: {\r\n        interviewees: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请添加被访人员信息',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n        visitors: [{\r\n\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\treturn this.$u.test.array(value) && value.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmessage: '请添加来访人员信息',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n\t\t\t\tvisitorCompany: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请填写来访单位',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n        visitorTime: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择到访时间',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n        levalTime: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择离访时间',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n        visitArea: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择到访区域',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n        visitorCause: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择到访事由',\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}],\r\n\t\t\t\tvisitorPersonCount:[{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请输入人数',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n\t\t\t\tinvitationMinuteExpire:[{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择邀请有效时长',\r\n\t\t\t\t}]\r\n      },\r\n\t\t\tvisitorTimeLabel:\"\",\r\n\t\t\tlevalTimeLabel:\"\"\r\n    };\r\n  },\r\n  onLoad(option) {\r\n    try {\r\n      const applyForm = uni.getStorageSync('applyForm_key');\r\n      if (applyForm) {\r\n        if (applyForm.targetVisitorEmpName) {\r\n\t\t\t\t\tlet targetVisitorEmpName = applyForm.targetVisitorEmpName.length > 8 ? applyForm.targetVisitorEmpName.substr(0,8)+'...' : applyForm.targetVisitorEmpName;\r\n          this.form.interviewees = targetVisitorEmpName + ' ' + applyForm.targetVisitorEmpPhone;\r\n        }\r\n        this.form['targetVisitorEmpPhone'] = applyForm.targetVisitorEmpPhone;\r\n        this.form['targetVisitorEmpName'] = applyForm.targetVisitorEmpName;\r\n        if (applyForm.visitForm) {\r\n          this.visitList = applyForm.visitForm;\r\n        }\r\n        this.form.visitors = this.visitList;\r\n        this.form.visitorCompany = applyForm.visitorCompany;\r\n        this.form.visitorTime = applyForm.visitorTime;\r\n        this.form.levalTime = applyForm.levalTime;\r\n        this.form.visitArea = applyForm.visitArea;\r\n        this.form['visitorAreaId'] = applyForm.visitorAreaId;\r\n        this.form.visitorCause = applyForm.visitorCause;\r\n\t\t\t\tthis.form.visitorPersonCount = applyForm.visitorPersonCount;\r\n\t\t\t\tthis.form.invitationMinuteExpireLabel = applyForm.invitationMinuteExpireLabel;\r\n\t\t\t\tthis.form.invitationMinuteExpire = applyForm.invitationMinuteExpire;\r\n        this.applyForms = applyForm;\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n    this.initPageData();\r\n  },\r\n  onReady() {\r\n    this.$refs.uForm.setRules(this.rules);\r\n\t\tif(this.vuex_useInfo.bindEmpType == 2){\r\n\t\t  uni.setNavigationBarTitle({ title:'教职工邀约' })\r\n\t\t}else{\r\n\t\t  uni.setNavigationBarTitle({ title:'访客预约' })\r\n\t\t}\r\n  },\r\n  methods: {\r\n    btnClick(type) {\r\n      this.$refs.uForm.validate().then(() => {\r\n\t\t\t\tif (!this.agreement) return this.$u.toast('请勾选协议');\r\n\t\t\t\tlet form = uni.$u.deepClone(this.form);\r\n\t\t\t\tif(this.dateType === 'datetime'){\r\n\t\t\t\t\tform.visitorTime = form.visitorTime + ':00';\r\n\t\t\t\t\tform.levalTime = form.levalTime + ':59';\r\n\t\t\t\t\tlet start = new Date(this.iosTransDate(form.visitorTime)).getTime(), \r\n\t\t\t\t\t\t\tend = new Date(this.iosTransDate(form.levalTime)).getTime();\r\n\t\t\t\t\tlet diff = end - start;\r\n\t\t\t\t\tif(diff > 24*60*60*1000*this.maxDays){\r\n\t\t\t\t\t\treturn this.$refs.uToast.show({\r\n\t\t\t\t\t\t\tmessage: `最大只可预约${this.maxDays}天`,\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\ticon: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this.vuex_useInfo.bindEmpType != 2){\r\n\t\t\t\t\tif(type === 'left'){\r\n\t\t\t\t\t\tthis.$u.route('/pageFk/retinue-ask/retinue-ask',{dateType:this.dateType,visitorMaxEmpNum:this.visitorMaxEmpNum});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t\t\tsubmit(form).then(res => {\r\n\t\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\t\tthis.btnDisabled = true;\r\n\t\t\t\t\t\t\tuni.removeStorageSync('applyForm_key');\r\n\t\t\t\t\t\t\tuni.removeStorageSync('goodsHistory_key');\r\n\t\t\t\t\t\t\tthis.$refs.uToast.show({ message: res.data.msg, type: 'success' });\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.backClick();\r\n\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\t\tthis.$refs.uToast.show({ message: err, type: 'error', icon: false });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 员工邀约界面按钮\r\n\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t\ttargetInviteSubmit(form).then(res => {\r\n\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\tthis.btnDisabled = true;\r\n\t\t\t\t\t\tuni.removeStorageSync('applyForm_key');\r\n\t\t\t\t\t\tthis.$refs.uToast.show({ message: res.data.msg, type: 'success' });\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$u.route('/pageFk/retinue-details/retinue-details',{visitorNo:res.data.data.visitorNo})\r\n\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\tthis.$refs.uToast.show({ message: err, type: 'error', icon: false });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n    },\r\n    \r\n    initPageData() {\r\n      this.visitAreaList = [];\r\n      this.visitReasonsList = [];\r\n      initFkCfg().then(res => {\r\n        if (res.data.code == 200) {\r\n          let d = res.data.data;\r\n          this.strings = d.FK_RULE_DESCRIPTION;\r\n\t\t\t\t\tthis.maxDays = d.FK_APPOINTMENT_MAX_DYAS || 1;\r\n\t\t\t\t\tthis.dateType = d.FK_YUYUE_DATE_OR_DATETIME_OPTIONS || 'date';\r\n\t\t\t\t\tthis.visitorMaxEmpNum = d.VISITOR_FOLLOW_UP_MAX_PERSON_COUNT || 6;\r\n\t\t\t\t\tthis.defaultLeaveTime = d.VISITOR_ZW_YY_TIME || '23:59:59';\r\n\t\t\t\t\tthis.betweenTime = d.VISITOR_DEFAULT_YY_DURATION || 2;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.visitAreaList = deleteEmptyArr(d.areaSelectData,2);\r\n          let data = d.causes[0].val;\r\n          data = data.split('#');\r\n\t\t\t\t\tlet arr2 = data.map((v,i) => ({value: i,name: v}))\r\n\t\t\t\t\tthis.visitReasonsList = arr2;\r\n        }\r\n      });\r\n    },\r\n\t\t// 点击添加被访人员跳转\r\n\t\tintervieweesClick() {\r\n\t\t  this.$u.route('/pageFk/interviewees/interviewees');\r\n\t\t},\r\n\t\t// 点击添加来访人员跳转\r\n\t\tvisitClick() {\r\n\t\t\tthis.$u.route('/pageFk/visitor/visitor');\r\n\t\t},\r\n\t\t// 删除已选来访人员\r\n\t\tdeleteClick(i) {\r\n\t\t  this.visitList.splice(i, 1);\r\n\t\t  this.form.visitors = this.visitList;\r\n\t\t  this.applyForms.visitForm = this.visitList;\r\n\t\t  uni.removeStorageSync('applyForm_key');\r\n\t\t  uni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t},\r\n\t\tvisitorCompanyBlur(e) {\r\n\t\t  this.form.visitorCompany = e;\r\n\t\t  this.applyForms.visitorCompany = e;\r\n\t\t  uni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t},\r\n    // 点击到访日期确定时\r\n    visitDateConfirm(e) {\r\n\t\t\tif(this.dateType === 'datetime'){\r\n\t\t\t\tlet result = uni.$u.timeFormat(e.value,'yyyy-mm-dd hh:MM');\r\n\t\t\t\tthis.form.visitorTime = result;\r\n\t\t\t\tthis.applyForms.visitorTime = result;\r\n\t\t\t\t\r\n\t\t\t\tlet leave = e.value + this.betweenTime*60*60*1000;\r\n\t\t\t\tlet end = uni.$u.timeFormat(e.value,'yyyy-mm-dd ') + this.defaultLeaveTime;\r\n\t\t\t\tif(new Date(this.iosTransDate(end))*1 - e.value <= 0){\r\n\t\t\t\t\tthis.visitDateShow = false;\r\n\t\t\t\t\tthis.$refs.uToast.show({ message: `当前预约时间过晚，当天最晚离访时间为${this.defaultLeaveTime}`, type: 'warning', icon: false });\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(new Date(this.iosTransDate(end))*1 - leave <= 0){\r\n\t\t\t\t\tthis.form.levalTime = end.substr(0,16);\r\n\t\t\t\t\tthis.applyForms.levalTime = end.substr(0,16);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.form.levalTime = uni.$u.timeFormat(leave,'yyyy-mm-dd hh:MM');\r\n\t\t\t\t\tthis.applyForms.levalTime = uni.$u.timeFormat(leave,'yyyy-mm-dd hh:MM');\r\n\t\t\t\t}\r\n\t\t\t\tthis.visitDateShow = false;\r\n\t\t\t}\r\n\t\t\tif(this.dateType === 'date'){\r\n\t\t\t\tlet result = uni.$u.timeFormat(e.value,'yyyy-mm-dd');\r\n\t\t\t\tthis.form.visitorTime = result;\r\n\t\t\t\tthis.applyForms.visitorTime = result;\r\n\t\t\t\tthis.form.levalTime = result;\r\n\t\t\t\tthis.applyForms.levalTime = result;\r\n\t\t\t\tthis.visitDateShow = false;\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t\tthis.$forceUpdate();\r\n    },\r\n    levalTimeClick() {\r\n\t\t\tlet visitorTime = this.form.visitorTime;\r\n\t\t\tif(!visitorTime) return this.$refs.uToast.show({ message: `请先选择到访时间！`, type: 'warning', icon: false })\r\n\t\t\t\r\n\t\t\tlet time = new Date(this.iosTransDate(visitorTime)).getTime();\r\n\t\t\tthis.departureMinDate = time;\r\n\t\t\tlet defaultLeaveTime = this.defaultLeaveTime ? this.defaultLeaveTime : '23:59:59';\r\n\t\t\tlet end = uni.$u.timeFormat(time,'yyyy-mm-dd ') + this.defaultLeaveTime;\r\n\t\t\t\r\n      if (this.maxDays == 1) {\r\n\t\t\t\tif(this.dateType === 'datetime'){\r\n\t\t\t\t\tthis.departureMaxDate = new Date(this.iosTransDate(end)).getTime();\r\n\t\t\t\t\tthis.departureDateShow = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n        this.departureDateShow = false;\r\n      } else if (this.maxDays == 0) {\r\n        this.departureMaxDate = new Date('2050/05/31').getTime();\r\n        this.departureDateShow = true;\r\n      } else {\r\n        let departureMaxDate = new Date(this.iosTransDate(end)) * 1 + (this.maxDays - 1) * 24 * 60 * 60 * 1000;\r\n        this.departureMaxDate = departureMaxDate;\r\n        this.departureDateShow = true;\r\n      }\r\n    },\r\n    // 点击离访日期确定时\r\n    departureDateConfirm(e) {\r\n\t\t\tif(this.dateType === 'datetime'){\r\n\t\t\t\tlet end = uni.$u.timeFormat(e.value,'yyyy-mm-dd ') + this.defaultLeaveTime;\r\n\t\t\t\t\r\n\t\t\t\tif(this.form.visitorTime && e.value - new Date(this.iosTransDate(this.form.visitorTime))*1 <= 0){\r\n\t\t\t\t\tthis.departureDateShow = false;\r\n\t\t\t\t\treturn this.$refs.uToast.show({ message: `离访时间不能小于到访时间`, type: 'warning', icon: false })\r\n\t\t\t\t}\r\n\t\t\t\tif(new Date(this.iosTransDate(end))*1 - e <= 0){\r\n\t\t\t\t\tthis.departureDateShow = false;\r\n\t\t\t\t\tthis.$refs.uToast.show({ message: `当前离访时间过晚，当天最晚离访时间为${this.defaultLeaveTime}`, type: 'warning', icon: false })\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet result = uni.$u.timeFormat(e.value,this.dateType === 'datetime' ? 'yyyy-mm-dd hh:MM' : 'yyyy-mm-dd');\r\n      this.form.levalTime = result;\r\n      this.applyForms.levalTime = result;\r\n      uni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t\tthis.departureDateShow = false;\r\n    },\r\n    // 点击区域确定时\r\n\t\tvisitAreaConfirm(e) {\r\n    // visitAreaConfirm({ detail:{ value }}) {\r\n      this.form.visitArea = '';\r\n      this.applyForms.visitArea = '';\r\n\t\t\t// value.map((val, index) => {\r\n\t\t\t//   if (val.text == null) {\r\n\t\t\t//     this.form.visitArea += this.form.visitArea == '' ? val.text : '';\r\n\t\t\t//     this.applyForms.visitArea = this.form.visitArea;\r\n\t\t\t//   } else {\r\n\t\t\t//     this.form.visitArea += this.form.visitArea == '' ? val.text : '-' + val.text;\r\n\t\t\t//     this.applyForms.visitArea = this.form.visitArea;\r\n\t\t\t//   }\r\n\t\t\t//   if (val.value == null) {\r\n\t\t\t//     this.form['visitorAreaId'] = value[0].value;\r\n\t\t\t//     this.applyForms['visitorAreaId'] = value[0].value;\r\n\t\t\t//   } else {\r\n\t\t\t//     this.form['visitorAreaId'] = val.value;\r\n\t\t\t//     this.applyForms['visitorAreaId'] = val.value;\r\n\t\t\t//   }\r\n\t\t\t// });\r\n\t\t\tthis.form.visitArea = e.result;\r\n\t\t\tthis.applyForms.visitArea = e.result;\r\n\t\t\tthis.form['visitorAreaId'] = e.value[2];\r\n\t\t\tthis.applyForms['visitorAreaId'] = e.value[2];\r\n\t\t\tthis.$forceUpdate();\r\n      uni.setStorageSync('applyForm_key', this.applyForms);\r\n    },\r\n\t\thandlerSelect(type){\r\n\t\t\tif(type === 'visitorCause'){\r\n\t\t\t\tthis.actionSheetTitle = \"请选择到访事由\";\r\n\t\t\t\tthis.actionSheetData = this.visitReasonsList;\r\n\t\t\t}\r\n\t\t\tif(type === 'invitationMinuteExpire'){\r\n\t\t\t\tthis.actionSheetTitle = \"请选择邀请有效时长\";\r\n\t\t\t\tthis.actionSheetData = this.invitationMinuteExpireList;\r\n\t\t\t}\r\n\t\t\tthis.selectType = type;\r\n\t\t\tthis.actionSheetShow = true;\r\n\t\t},\r\n\t\tactionSheetChange(e){\r\n\t\t\tif(this.selectType === 'visitorCause'){\r\n\t\t\t\tthis.form['visitorCause'] = e.name;\r\n\t\t\t\tthis.applyForms.visitorCause = e.name;\r\n\t\t\t\tuni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t\t}\r\n\t\t\tif(this.selectType === 'invitationMinuteExpire'){\r\n\t\t\t\tthis.form.invitationMinuteExpireLabel = e.name;\r\n\t\t\t\tthis.form.invitationMinuteExpire = e.value;\r\n\t\t\t\tthis.$set(this.form,'invitationMinuteExpire',e.value)\r\n\t\t\t\tthis.applyForms.invitationMinuteExpireLabel = e.name\r\n\t\t\t\tthis.applyForms.invitationMinuteExpire = e.value;\r\n\t\t\t\tuni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t\t}\r\n\t\t},\r\n\t\tvisitorPersonCountChange(val) {\r\n\t\t\tlet s = this.form.visitorPersonCount ? this.form.visitorPersonCount + val : val;\r\n\t\t\tif(s*1 <= this.visitorMaxEmpNum){\r\n\t\t\t\tthis.$set(this.form,'visitorPersonCount',s+'')\r\n\t\t\t\tthis.applyForms.visitorPersonCount = s+'';\r\n\t\t\t\tuni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t\t}\r\n\t\t},\r\n\t\tvisitorPersonCountBackspace() {\r\n\t\t  if (this.form.visitorPersonCount.length) {\r\n\t\t    this.form.visitorPersonCount =  this.form.visitorPersonCount.substr(0, this.form.visitorPersonCount.length - 1);\r\n\t\t\t\tthis.applyForms.visitorPersonCount =  this.form.visitorPersonCount;\r\n\t\t\t\tuni.setStorageSync('applyForm_key', this.applyForms);\r\n\t\t  }\r\n\t\t},\r\n    // 勾选注意事项\r\n    checkboxChange(e) {\r\n      this.agreement = e.length ? true : false;\r\n    },\r\n\t\tphoneClick(phone) {\r\n\t\t  uni.makePhoneCall({ phoneNumber: phone });\r\n\t\t},\r\n\t\tbackClick() {\r\n\t\t  uni.switchTab({ url: '/pages/index/index' });\r\n\t\t},\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formItem {\r\n  background-color: #ffffff;\r\n  padding: 20rpx 30rpx 20rpx 20rpx;\r\n  border-bottom: 0;\r\n}\r\n>>> .uni-input-input {\r\n  color: #121212;\r\n  font-weight: 800;\r\n}\r\n>>> .u-form-item {\r\n  color: #696969;\r\n}\r\n.agreement {\r\n  display: flex;\r\n  margin: 0rpx 35rpx 20rpx;\r\n  padding-left: 30rpx;\r\n}\r\n.icontitle {\r\n  line-height: 0rpx;\r\n  width: 140rpx;\r\n  padding-bottom: 10rpx;\r\n}\r\n.c007AFF{\r\n\tcolor: #007AFF;\r\n}\r\n</style>\n","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./apply.vue?vue&type=style&index=0&id=1fb88cc0&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./apply.vue?vue&type=style&index=0&id=1fb88cc0&scoped=true&lang=css&\""],"sourceRoot":""}