{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pageFk/visitor/visitor.vue?b39a","webpack:///F:/HWD/test/pageFk/visitor/visitor.vue?9e55","webpack:///F:/HWD/test/pageFk/visitor/visitor.vue?35b4","webpack:///F:/HWD/test/pageFk/visitor/visitor.vue?a414","uni-app:///pageFk/visitor/visitor.vue","webpack:///F:/HWD/test/pageFk/visitor/visitor.vue?6046"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","uForm","myCard","uImage","myUpload","uFormItem","uInput","uRadioGroup","uRadio","uSwipeAction","uSwipeActionItem","myButton","uActionSheet","wPicker","uKeyboard","uOverlay","uToast","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","imgBase64","length","g1","isShowCertificate","certificateUrl","g2","g3","visitHistory","l0","__map","item","index","$orig","__get_orig","g4","$u","guid","_isMounted","e0","$event","certificateTypeShow","e1","sourceAdrShow","e2","keyboardCarShow","e3","keyboardNumShow","e4","e5","e6","e7","e8","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","i","form","goodsNum","visitorSex","note","fileHeader","token","appId","sid","showProgress","rules","visitorName","required","trigger","visitorPhone","validator","certificateType","visitorCertificateCode","visitForm","applyForm","text","style","backgroundColor","width","visitorCarNumVal","maskShow","maskImgShow","CodeAction","goodsAction","goodsFileList","goodsList","errText","sourceAdrDic","isShowSourceAddr","certificateTypeDic","value","name","onReady","onLoad","sourceAddress","methods","imageClick","uni","urls","handlerOCR","success","url","filePath","type","certificateTypeConfirm","goodsUpload","goodsBeforeRemove","certificateUpload","deleteItem2","goodsNumChange","goodsNumBackspace","carChange","carBackspace","sourceAdrConfirm","backClick","delta","beforeUpload","fileUpload","uploadError","deleteItem","submit","exit","key","swipeClick","swipeContentClick"],"mappings":"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CACA,6CACA,0CAEAC,kBAAA,eACA,0FACA,4FACA,sBACA,gEACA,aACAC,gBACA3B,YACAhE,iBACAiE,kCAIA,qEAEA,uCACA,wDAEA,oCACA,iDACA,2BACA,2CAIA2B,SACAC,uBACAC,gBAAAC,YAEAC,sBAAA,WACAF,eACAG,oBACA,cACAH,cACAI,0EACAV,YACAW,4BACAF,oBACA,yBACA,cACA,8BACA,wDACA,yFAEA,qBAAAjG,0BAAAoG,sBAOAC,mCACA,kCAEAC,8BACA,iBACA,qBACA,aACA,2BACA,wBAAAtG,eAAAoG,kBAEA,wBAAApG,cAAAoG,gBAGAG,gCACA,4BAEAC,oCACA,iBACA,qBACA,aACA,wBAAAxG,eAAAoG,iBACA,oCAEA,mBACA,wBAAApG,cAAAoG,iBAGAK,uBACA,uBACA,6BAEAC,2BACA,6BACA,wBAEAC,6BACA,4BACA,8EAGAC,sBACA,iCACA,yBACA,gDAGAC,wBACA,+BACA,qFACA,gDAGAC,6BACA,wDAEAC,qBACAjB,gBAAAkB,WAEAC,2BAEA,OADA,kBACA,GAEAC,6BACA,qBACA,iBACA,aACA,iCACA,wBAAAlH,eAAAoG,mBAEA,wBAAApG,cAAAoG,eACA,oBAGAe,wBACAjH,eACA,kBAEAkH,sBACA,kBACA,4BAEAC,kBAAA,WACA,6CACA,4CAAArH,oBAAAoG,eACA,sEAAApG,iBAAAoG,iBACA,mBACA/C,mDACAA,4BACAA,kCACAA,wCACAA,kBACA,cACAA,6BAEA,aACAA,gCAEA,SACAA,4BAGAA,UACA,sGACAiE,aACA,gCACA,2BACA,iDAEAxB,cAAAyB,uBAAA1E,sBAEA,uGACA,KACA,iBAEA,oBAEA,kCACAiD,cAAAyB,oBAAA1E,mBACAiD,cAAAI,2BAGAsB,yBACA,aACA,8BACA1B,cAAAyB,uBAAA1E,2BAGA4E,8BACA,2BACA,YACA,+BACA,qCACA,6EAAAvB,UAAA,GACA,8DACA,qBACA,wBAGA,c,6DChdA,yHAA0uC,eAAG,G","file":"pageFk/visitor/visitor.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageFk/visitor/visitor.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./visitor.vue?vue&type=template&id=4cb9bd80&scoped=true&\"\nvar renderjs\nimport script from \"./visitor.vue?vue&type=script&lang=js&\"\nexport * from \"./visitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./visitor.vue?vue&type=style&index=0&id=4cb9bd80&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cb9bd80\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageFk/visitor/visitor.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./visitor.vue?vue&type=template&id=4cb9bd80&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form/u-form\" */ \"@/uni_modules/uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    myUpload: function () {\n      return import(\n        /* webpackChunkName: \"components/my-upload\" */ \"@/components/my-upload.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uRadioGroup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uni_modules/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-radio/u-radio\" */ \"@/uni_modules/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    \"u-Textarea\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--textarea/u--textarea\" */ \"@/uni_modules/uview-ui/components/u--textarea/u--textarea.vue\"\n      )\n    },\n    uSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/uni_modules/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item\" */ \"@/uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item.vue\"\n      )\n    },\n    myButton: function () {\n      return import(\n        /* webpackChunkName: \"components/my-button\" */ \"@/components/my-button.vue\"\n      )\n    },\n    uActionSheet: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-action-sheet/u-action-sheet\" */ \"@/uni_modules/uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    },\n    wPicker: function () {\n      return import(\n        /* webpackChunkName: \"components/w-picker/w-picker\" */ \"@/components/w-picker/w-picker.vue\"\n      )\n    },\n    uKeyboard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-keyboard/u-keyboard\" */ \"@/uni_modules/uview-ui/components/u-keyboard/u-keyboard.vue\"\n      )\n    },\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.imgBase64.length\n  var g1 = _vm.isShowCertificate && _vm.certificateUrl.length > 0\n  var g2 = _vm.isShowCertificate && _vm.certificateUrl.length === 0\n  var g3 = _vm.visitHistory.length\n  var l0 =\n    g3 > 0\n      ? _vm.__map(_vm.visitHistory, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g4 = _vm.$u.guid()\n          return {\n            $orig: $orig,\n            g4: g4,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.certificateTypeShow = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.sourceAdrShow = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.keyboardCarShow = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.keyboardNumShow = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.certificateTypeShow = false\n    }\n    _vm.e5 = function ($event) {\n      _vm.keyboardCarShow = false\n    }\n    _vm.e6 = function ($event) {\n      _vm.keyboardCarShow = false\n    }\n    _vm.e7 = function ($event) {\n      _vm.keyboardNumShow = false\n    }\n    _vm.e8 = function ($event) {\n      _vm.keyboardNumShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./visitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./visitor.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <movable-area style=\"width: 100%; height: 100%\">\r\n      <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n        <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n      </movable-view>\r\n      <scroll-view scroll-y style=\"height: calc(100% - 67px);width: 100%;\">\r\n\t\t\t\t<u-form :model=\"form\" ref=\"uForm\" :border-bottom=\"false\" label-width=\"140\">\r\n\t\t\t\t\t<my-card :showFoot=\"false\" showHead headBorderBottom margin=\"0 20rpx 20rpx\">\r\n\t\t\t\t\t\t<view slot=\"head\" class=\"u-font-32 u-main-color\">添加来访人员</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t  <view v-if=\"imgBase64.length > 0\" style=\"position: relative;width: 220rpx;height: 220rpx;margin: 0 auto;\">\r\n\t\t\t\t\t\t    <u-image \r\n\t\t\t\t\t\t\t\t\t@click=\"imageClick(imgBase64)\" :src=\"imgBase64\" \r\n\t\t\t\t\t\t\t\t\tshape=\"circle\" width=\"200rpx\" height=\"200rpx\" \r\n\t\t\t\t\t\t\t\t\tstyle=\"overflow: hidden;\"></u-image>\r\n\t\t\t\t\t\t    <view class=\"u-delete-icon\" @click=\"deleteItem\">\r\n\t\t\t\t\t\t\t\t\t<u-icon name=\"close\" size=\"20\" color=\"#ffffff\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t  <view class=\"u-row-center avatar u-flex u-row-center\" v-else>\r\n\t\t\t\t\t\t\t\t<my-upload\r\n\t\t\t\t\t\t\t\t  ref=\"uUpload\"\r\n\t\t\t\t\t\t\t\t  :multiple=\"false\"\r\n\t\t\t\t\t\t\t\t  max-count=\"1\"\r\n\t\t\t\t\t\t\t\t  :header=\"fileHeader\"\r\n\t\t\t\t\t\t\t\t  :action=\"CodeAction\"\r\n\t\t\t\t\t\t\t\t  name=\"file\"\r\n\t\t\t\t\t\t\t\t  :auto-upload=\"true\"\r\n\t\t\t\t\t\t\t\t  :show-progress=\"showProgress\"\r\n\t\t\t\t\t\t\t\t  v-model=\"form.img\"\r\n\t\t\t\t\t\t\t\t\t:form-data=\"{mode:'VISITOR_IMG'}\"\r\n\t\t\t\t\t\t\t\t  :show-tips=\"false\"\r\n\t\t\t\t\t\t\t\t  :shomy-upload-list=\"true\"\r\n\t\t\t\t\t\t\t\t  @on-success=\"fileUpload\"\r\n\t\t\t\t\t\t\t\t  @on-error=\"uploadError\"\r\n\t\t\t\t\t\t\t\t  :before-upload=\"beforeUpload\"\r\n\t\t\t\t\t\t\t\t></my-upload>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"u-font-20 u-text-center u-light-color\">请上传清晰的个人照片，以便入校通行</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"证件类型\" prop=\"certificateType\" required @click=\"certificateTypeShow = true\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n\t\t\t\t\t\t  <u-input v-model=\"form.certificateType\" disabled disabledColor=\"#ffffff\" placeholder=\"请选择\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"证件编号\" prop=\"visitorCertificateCode\" required>\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"camera-fill\" size=\"60\" @click=\"handlerOCR\" color=\"#3c9cff\"></u-icon>\r\n\t\t\t\t\t\t\t<u-input v-model.trim=\"form.visitorCertificateCode\" placeholder=\"请填写\" maxlength=\"18\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view v-show=\"isShowCertificate && certificateUrl.length > 0\" style=\"position: relative;width: 220rpx;height: 220rpx;margin: 10rpx;\">\r\n\t\t\t\t\t\t\t<u-image \r\n\t\t\t\t\t\t\t\t@click=\"imageClick(certificateUrl)\" \r\n\t\t\t\t\t\t\t\t:src=\"certificateUrl\" \r\n\t\t\t\t\t\t\t\tstyle=\"width: 200rpx;height: 200rpx;overflow: hidden;border-radius: 10rpx;\"></u-image>\r\n\t\t\t\t\t\t\t<view class=\"u-delete-icon\" @click=\"deleteItem2\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"close\" size=\"20\" color=\"#ffffff\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<my-upload\r\n\t\t\t\t\t\t\tv-show=\"isShowCertificate && certificateUrl.length === 0\"\r\n\t\t\t\t\t\t\tref=\"uUpload6\"\r\n\t\t\t\t\t\t\t:multiple=\"false\"\r\n\t\t\t\t\t\t\tmax-count=\"1\"\r\n\t\t\t\t\t\t\tupload-text=\"上传证件照片\"\r\n\t\t\t\t\t\t\t:header=\"fileHeader\"\r\n\t\t\t\t\t\t\t:action=\"CodeAction\"\r\n\t\t\t\t\t\t\tname=\"file\"\r\n\t\t\t\t\t\t\t:auto-upload=\"true\"\r\n\t\t\t\t\t\t\t:show-progress=\"showProgress\"\r\n\t\t\t\t\t\t\tv-model=\"form.certificateUrl\"\r\n\t\t\t\t\t\t\t:form-data=\"{mode:'VISITOR_CERTIFICATE_IMG'}\"\r\n\t\t\t\t\t\t\t:show-tips=\"false\"\r\n\t\t\t\t\t\t\t:shomy-upload-list=\"true\"\r\n\t\t\t\t\t\t\t@on-success=\"certificateUpload\"\r\n\t\t\t\t\t\t\t@on-error=\"uploadError\"\r\n\t\t\t\t\t\t\t:before-upload=\"beforeUpload\"\r\n\t\t\t\t\t\t></my-upload>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"来访人员\" prop=\"visitorName\" required>\r\n\t\t\t\t\t\t  <u-input v-model.trim=\"form.visitorName\" placeholder=\"请填写\" maxlength=\"50\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"性别\">\r\n\t\t\t\t\t\t\t<u-radio-group v-model=\"form.visitorSex\" size=\"38\" iconSize=\"30\">\r\n\t\t\t\t\t\t\t\t<u-radio :name=\"1\" customStyle=\"margin-right:30rpx;\">男</u-radio>\r\n\t\t\t\t\t\t\t\t<u-radio :name=\"2\">女</u-radio>\r\n\t\t\t\t\t\t\t</u-radio-group>\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"手机号码\" prop=\"visitorPhone\" required>\r\n\t\t\t\t\t\t  <u-input :maxlength=\"11\" type=\"number\" v-model.trim=\"form.visitorPhone\" placeholder=\"请填写\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"来源地\" required prop=\"sourceAddress\" v-if=\"isShowSourceAddr\" @click=\"sourceAdrShow = true\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n\t\t\t\t\t\t\t<u-input disabled disabledColor=\"#ffffff\" v-model=\"form.sourceAddress\" placeholder=\"请填写\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"车牌号\" prop=\"visitorCarNum\" @click=\"keyboardCarShow = true\">\r\n\t\t\t\t\t\t\t<u-icon slot=\"right\" name=\"arrow-right\" color=\"#c0c4cc\"></u-icon>\r\n\t\t\t\t\t\t  <u-input disabled disabledColor=\"#ffffff\" :value=\"visitorCarNumVal\" v-model=\"form.visitorCarNum\" placeholder=\"请填写\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t</my-card>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<my-card :showFoot=\"false\" showHead headBorderBottom>\r\n\t\t\t\t\t\t<view slot=\"head\">添加携带物品</view>\r\n\t\t\t\t\t\t<u-form-item label=\"物品名称\">\r\n\t\t\t\t\t\t\t<u-input v-model.trim=\"form.goodsName\" placeholder=\"请填写物品名称\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"数量\" @click=\"keyboardNumShow = true\">\r\n\t\t\t\t\t\t\t<u-input v-model=\"form.goodsNum\" trim placeholder=\"请填写物品数量\" disabled disabledColor=\"#ffffff\" />\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-form-item label=\"备注\" prop=\"note\">\r\n\t\t\t\t\t\t\t<u--textarea \r\n\t\t\t\t\t\t\t\tv-model=\"form.note\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请填写物品型号、数量等\" \r\n\t\t\t\t\t\t\t\tcount border=\"none\" maxlength=\"100\" autoHeight></u--textarea>\r\n\t\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<my-upload\r\n\t\t\t\t\t\t\t\tref=\"uUpload4\"\r\n\t\t\t\t\t\t\t\t:multiple=\"true\"\r\n\t\t\t\t\t\t\t\tmax-count=\"3\"\r\n\t\t\t\t\t\t\t\tname=\"file\"\r\n\t\t\t\t\t\t\t\twidth=\"190\"\r\n\t\t\t\t\t\t\t\t:file-list=\"goodsFileList\"\r\n\t\t\t\t\t\t\t\t:action=\"goodsAction\"\r\n\t\t\t\t\t\t\t\t:show-progress=\"showProgress\"\r\n\t\t\t\t\t\t\t\t:header=\"fileHeader\"\r\n\t\t\t\t\t\t\t\t@on-success=\"goodsUpload\"\r\n\t\t\t\t\t\t\t\t@on-error=\"uploadError\"\r\n\t\t\t\t\t\t\t\t:before-upload=\"beforeUpload\"\r\n\t\t\t\t\t\t\t\t:beforeRemove=\"goodsBeforeRemove\"\r\n\t\t\t\t\t\t\t\t:auto-upload=\"true\"\r\n\t\t\t\t\t\t\t></my-upload>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</my-card>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view v-if=\"visitHistory.length > 0\">\r\n\t\t\t\t\t  <view class=\"u-m-l-40 u-m-b-10\">历史来访记录</view>\r\n\t\t\t\t\t\t<u-swipe-action>\r\n\t\t\t\t\t\t\t<u-swipe-action-item \r\n\t\t\t\t\t\t\t\tv-for=\"(item, index) in visitHistory\" :key=\"$u.guid()\"\r\n\t\t\t\t\t\t\t\t:options=\"options\"\r\n\t\t\t\t\t\t\t\t@click=\"swipeClick($event,index)\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-p-30 u-line-1\" @click=\"swipeContentClick(index)\">\r\n\t\t\t\t\t\t\t\t  <text class=\"u-m-r-20\">{{ item.visitorName }}</text>\r\n\t\t\t\t\t\t\t\t  <text>{{ item.visitorPhone }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</u-swipe-action-item>\r\n\t\t\t\t\t\t</u-swipe-action>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-form>\r\n      </scroll-view>\r\n    </movable-area>\r\n\t\t\r\n\t\t<my-button @click=\"submit\">确定</my-button>\r\n\t\t\r\n\t\t<u-action-sheet\r\n\t\t\t:show=\"certificateTypeShow\" \r\n\t\t\t:actions=\"certificateTypeDic\"\r\n\t\t\ttitle=\"请选择证件编号\"\r\n\t\t\t@close=\"certificateTypeShow = false\"\r\n\t\t\t@select=\"certificateTypeConfirm\"></u-action-sheet>\r\n\t\t<w-picker\r\n\t\t  :visible.sync=\"sourceAdrShow\"\r\n\t\t  mode=\"linkage\"\r\n\t\t  :options=\"sourceAdrDic\"\r\n\t\t  :level=\"3\"\r\n\t\t  default-type=\"value\"\r\n\t\t  @confirm=\"sourceAdrConfirm\"\r\n\t\t  ref=\"linkage\" ></w-picker>\r\n\t\t<u-keyboard\r\n\t\t  ref=\"uKeyboard1\" \r\n\t\t  mode=\"car\" autoChange\r\n\t\t  :show=\"keyboardCarShow\"\r\n\t\t  @change=\"carChange\" \r\n\t\t  @backspace=\"carBackspace\"\r\n\t\t\t@cancel=\"keyboardCarShow = false\"\r\n\t\t\t@confirm=\"keyboardCarShow = false\"></u-keyboard>\r\n\t\t<u-keyboard\r\n\t\t  ref=\"uKeyboard2\" \r\n\t\t  mode=\"number\"\r\n\t\t  :show=\"keyboardNumShow\"\r\n\t\t  @change=\"goodsNumChange\" \r\n\t\t  @backspace=\"goodsNumBackspace\"\r\n\t\t\t@cancel=\"keyboardNumShow = false\"\r\n\t\t\t@confirm=\"keyboardNumShow = false\"></u-keyboard>\r\n\t\t\r\n\t\t<u-overlay :show=\"maskShow\">\r\n\t\t\t<view class=\"w-overlay\">正在提交，请等待...</view>\r\n\t\t</u-overlay>\r\n    <u-toast ref=\"uToast\" />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport config from '@/config/index.js';\r\nimport { city } from '@/utils/city.js'\r\nimport wPicker from \"@/components/w-picker/w-picker.vue\";\r\n\r\nexport default {\r\n\tcomponents:{ wPicker },\r\n  data() {\r\n    return {\r\n      form: {goodsNum:'',visitorSex:1,note:\"\"},\r\n\t\t\tfileHeader:{token: '',appId:\"\",sid:\"\"},\r\n      showProgress: true,\r\n      rules: {\r\n        visitorName: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请填写来访人员姓名',\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}],\r\n        visitorPhone: [{\r\n\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\treturn this.$u.test.mobile(value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmessage: '手机号码不正确',\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}],\r\n\t\t\t\tcertificateType: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请选择证件类型',\r\n\t\t\t\t\ttrigger: ['blur','change']\r\n\t\t\t\t}],\r\n        visitorCertificateCode: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\tmessage: '请输入证件编号',\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}]\r\n      },\r\n      visitHistory: [],\r\n      imgBase64: '',\r\n      visitForm: [],\r\n      applyForm: {},\r\n      options: [{ text: '删除', style: { backgroundColor: '#dd524d', width: '150rpx' } }],\r\n      keyboardCarShow: false,\r\n      visitorCarNumVal: '',\r\n      maskShow: false,\r\n      maskImgShow: false,\r\n\t\t\tCodeAction:`${config.baseUrl}/iot-wx/commons/upload`,\r\n\t\t\tgoodsAction:`${config.baseUrl}/iot-wx/visitor/goods/upload/pic`,\r\n\t\t\tkeyboardNumShow:false,\r\n\t\t\tgoodsFileList:[],\r\n\t\t\tgoodsList:[],\r\n\t\t\terrText:\"\",\r\n\t\t\tsourceAdrShow:false,\r\n\t\t\tsourceAdrDic:city(),\r\n\t\t\tisShowSourceAddr:true,\r\n\t\t\tisShowCertificate:true,\r\n\t\t\tcertificateTypeShow:false,\r\n\t\t\tcertificateTypeDic:[\r\n\t\t\t\t{value:\"身份证\",name:\"身份证\"},\r\n\t\t\t\t{value:\"军官证\",name:\"军官证\"},\r\n\t\t\t\t{value:\"驾驶证\",name:\"驾驶证\"},\r\n\t\t\t\t{value:\"港澳通行证\",name:\"港澳通行证\"},\r\n\t\t\t\t{value:\"台胞证\",name:\"台胞证\"},\r\n\t\t\t\t{value:\"护照\",name:\"护照\"},\r\n\t\t\t\t{value:\"其他\",name:\"其他\"}\r\n\t\t\t],\r\n\t\t\tcertificateUrl:\"\"\r\n    };\r\n  },\r\n  onReady() {\r\n\t\tthis.fileHeader.appId = this.vuex_urlobj.appId\r\n\t\tthis.fileHeader.token = this.vuex_urlobj.token\r\n\t\tthis.fileHeader.sid = this.vuex_urlobj.sid\r\n  },\r\n  onLoad() {\r\n\t\tthis.isShowSourceAddr = this.vuex_cfg?.isShowSourceAddr == 1 ? true : false;\r\n\t\tthis.isShowCertificate = this.vuex_cfg?.isShowCertificate == 1 ? true : false;\r\n\t\tif(this.isShowSourceAddr){\r\n\t\t\tthis.$nextTick(() => this.$refs.uForm.setRules({\r\n\t\t\t\t...this.rules,\r\n\t\t\t\tsourceAddress: [{\r\n\t\t\t\t\trequired:true,\r\n\t\t\t\t\tmessage: '请选择来源地',\r\n\t\t\t\t\ttrigger: ['change', 'blur']\r\n\t\t\t\t}],\r\n\t\t\t}))\r\n\t\t}else{\r\n\t\t\tthis.$nextTick(() => this.$refs.uForm.setRules(this.rules))\r\n\t\t}\r\n    if (uni.getStorageSync('visitHistory_key')) {\r\n      this.visitHistory = uni.getStorageSync('visitHistory_key');\r\n    }\r\n    if (uni.getStorageSync('applyForm_key')) {\r\n      this.applyForm = uni.getStorageSync('applyForm_key');\r\n      if (this.applyForm.visitForm) {\r\n        this.visitForm = this.applyForm.visitForm;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    imageClick(img) {\r\n\t\t\tuni.previewImage({urls:[img]})\r\n    },\r\n\t\thandlerOCR(){\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl:`${config.baseUrl}/iot-wx/commons/idcard/ocr/recognition`,\r\n\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\tfilePath:res.tempFilePaths[0],\r\n\t\t\t\t\t\tsuccess: (r) => {\r\n\t\t\t\t\t\t\tlet data =JSON.parse(r.data);\r\n\t\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\t\tif(data.code == 200 && data.data.idCardNo){\r\n\t\t\t\t\t\t\t\tthis.$set(this.form,'visitorCertificateCode',data.data.idCardNo);\r\n\t\t\t\t\t\t\t\tthis.$set(this.form,'visitorName',data.data.name.length > 50 ? data.data.name.substr(0,50) : data.data.name);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.$refs.uToast.show({ message:\"解析失败，请重新上传图片识别！\",type: \"error\" });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcertificateTypeConfirm(e){\r\n\t\t\tthis.form.certificateType = e.name;\r\n\t\t},\r\n\t\tgoodsUpload(data, index, lists, name){\r\n\t\t\tthis.maskShow = false;\r\n\t\t\tthis.showProgress = false;\r\n\t\t\tif (data.code == 200) {\r\n\t\t\t\tthis.goodsList.push(data.msg)\r\n\t\t\t  this.$refs.uToast.show({ message: '上传成功', type: 'success' });\r\n\t\t\t} else {\r\n\t\t\t  this.$refs.uToast.show({ message: data.msg, type: 'error' });\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoodsBeforeRemove(index,lists){\r\n\t\t\tthis.goodsList.splice(index, 1);\r\n\t\t},\r\n\t\tcertificateUpload(data, index, lists, name){\r\n\t\t\tthis.maskShow = false;\r\n\t\t\tthis.showProgress = false;\r\n\t\t\tif (data.code == 200) {\r\n\t\t\t  this.$refs.uToast.show({ message: '上传成功', type: 'success' });\r\n\t\t\t\tthis.certificateUrl = data.data.absUrl;\r\n\t\t\t} else {\r\n\t\t\t\tthis.deleteItem2();\r\n\t\t\t  this.$refs.uToast.show({ message: data.msg, type: 'error' });\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteItem2() {\r\n\t\t\tthis.certificateUrl = '';\r\n\t\t  this.$refs.uUpload6.clear();\r\n\t\t},\r\n\t\tgoodsNumChange(val) {\r\n\t\t\tlet str = this.form.goodsNum || '';\r\n\t\t  this.form.goodsNum = str + val;\r\n\t\t},\r\n\t\tgoodsNumBackspace() {\r\n\t\t  if (this.form.goodsNum.length) {\r\n\t\t    this.form.goodsNum = this.form.goodsNum.substr(0, this.form.goodsNum.length - 1);\r\n\t\t  }\r\n\t\t},\r\n    carChange(val) {\r\n      if(this.visitorCarNumVal.length < 9){\r\n        this.visitorCarNumVal += val;\r\n        this.form.visitorCarNum = this.visitorCarNumVal;\r\n      }\r\n    },\r\n    carBackspace() {\r\n      if (this.visitorCarNumVal.length) {\r\n        this.visitorCarNumVal = this.visitorCarNumVal.substr(0, this.visitorCarNumVal.length - 1);\r\n        this.form.visitorCarNum = this.visitorCarNumVal;\r\n      }\r\n    },\r\n\t\tsourceAdrConfirm(e){\r\n\t\t\tthis.$set(this.form,'sourceAddress',e.value.join('-'));\r\n\t\t},\r\n    backClick() {\r\n      uni.navigateBack({ delta:1 })\r\n    },\r\n    beforeUpload(index, list) {\r\n      this.maskShow = true;\r\n      return true;\r\n    },\r\n    fileUpload(data, index, lists, name) {\r\n\t\t\tthis.showProgress = false;\r\n\t\t\tthis.maskShow = false;\r\n      if (data.code == 200) {\r\n        this.imgBase64 = data.data.absUrl || '';\r\n        this.$refs.uToast.show({ message: '上传成功', type: 'success' });\r\n      } else {\r\n        this.$refs.uToast.show({ message: data.msg, type: 'error' });\r\n\t\t\t\tthis.deleteItem();\r\n      }\r\n    },\r\n\t\tuploadError(err){\r\n\t\t\tconsole.log(err);\r\n\t\t\tthis.maskShow = false\r\n\t\t},\r\n    deleteItem() {\r\n      this.imgBase64 = '';\r\n      this.$refs.uUpload.clear();\r\n    },\r\n    submit() {\r\n      this.$refs.uForm.validate().then(() => {\r\n\t\t\t\tif (!this.imgBase64) return this.$refs.uToast.show({ message: '请选择来访人员照片', type: 'error' });\r\n\t\t\t\tif(this.isShowCertificate && !this.certificateUrl) return this.$refs.uToast.show({ message: '请上传证件照', type: 'warning' });\r\n\t\t\t\tlet form = {...this.form};\r\n\t\t\t\tform.visitorCarNum = form.visitorCarNum ? form.visitorCarNum : \"\"\r\n\t\t\t\tform.visitorImgUrl = this.imgBase64;\r\n\t\t\t\tform.certificateUrl = this.certificateUrl;\r\n\t\t\t\tform.visitorGoodImgs = this.goodsList.join(',');\r\n\t\t\t\tform.visitorGoods = \"\";\r\n\t\t\t\tif(form.goodsName){\r\n\t\t\t\t\tform.visitorGoods += form.goodsName;\r\n\t\t\t\t}\r\n\t\t\t\tif(form.goodsNum){\r\n\t\t\t\t\tform.visitorGoods += ','+form.goodsNum;\r\n\t\t\t\t}\r\n\t\t\t\tif(form.note){\r\n\t\t\t\t\tform.visitorGoods += ','+form.note;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tform.show = false;\r\n\t\t\t\tlet exit = this.visitHistory.filter(item => item.visitorCertificateCode != form.visitorCertificateCode)\r\n\t\t\t\texit.unshift(form)\r\n\t\t\t\tthis.visitHistory = [...exit];\r\n\t\t\t\tif (this.visitHistory.length >= 10) {\r\n\t\t\t\t\tthis.visitHistory.splice(this.visitHistory.length - 1, 1);\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorage({ key: 'visitHistory_key', data: this.visitHistory });\r\n\t\t\t\t\r\n\t\t\t\tlet index = this.visitForm.findIndex(item => item.visitorCertificateCode === form.visitorCertificateCode);\r\n\t\t\t\tif(index >= 0){\r\n\t\t\t\t\tthis.visitForm[index] = form;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.visitForm.push(form);\r\n\t\t\t\t}\r\n\t\t\t\tthis.applyForm.visitForm = this.visitForm;\r\n\t\t\t\tuni.setStorage({ key: 'applyForm_key', data: this.applyForm });\r\n\t\t\t\tuni.redirectTo({ url: '../apply/apply' });\r\n\t\t\t});\r\n    },\r\n    swipeClick(e,index) {\r\n\t\t\tif (e.index == 0) {\r\n\t\t\t  this.visitHistory.splice(index, 1);\r\n\t\t\t  uni.setStorage({ key: 'visitHistory_key', data: this.visitHistory });\r\n\t\t\t}\r\n    },\r\n\t\tswipeContentClick(index) {\r\n\t\t  let item = this.visitHistory[index];\r\n\t\t  this.form = item;\r\n\t\t  this.imgBase64 = item.visitorImgUrl;\r\n\t\t  this.certificateUrl = item.certificateUrl;\r\n\t\t  let arr = item.visitorGoodImgs ? item.visitorGoodImgs.split(',').map(v => ({url:v})) : [];\r\n\t\t  this.goodsList = arr.length ? arr.map(v => v.url) : [];\r\n\t\t  this.goodsFileList = arr;\r\n\t\t  this.showProgress = false;\r\n\t\t}\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.u-delete-icon {\r\n  position: absolute;\r\n  top: -10rpx;\r\n  right: 6rpx;\r\n  z-index: 8;\r\n  background-color: $u-error;\r\n  border-radius: 100rpx;\r\n  width: 44rpx;\r\n  height: 44rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.maskClass {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #ffffff;\r\n}\r\n.avatar /deep/.u-list-item{\r\n\tborder-radius: 200rpx !important;\r\n}\r\n</style>\n","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./visitor.vue?vue&type=style&index=0&id=4cb9bd80&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./visitor.vue?vue&type=style&index=0&id=4cb9bd80&lang=scss&scoped=true&\""],"sourceRoot":""}