{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pageFk/retinue-details/retinue-details.vue?16d8","webpack:///F:/HWD/test/pageFk/retinue-details/retinue-details.vue?c635","webpack:///F:/HWD/test/pageFk/retinue-details/retinue-details.vue?2bee","webpack:///F:/HWD/test/pageFk/retinue-details/retinue-details.vue?b2b4","uni-app:///pageFk/retinue-details/retinue-details.vue","webpack:///F:/HWD/test/pageFk/retinue-details/retinue-details.vue?ff3c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","myCard","uCountDown","uImage","uSwipeAction","uSwipeActionItem","uAvatar","uTag","tkiQrcode","myButton","uPopup","uModal","uToast","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","retinueEmpArr","length","g1","otherEmpArr","l0","__map","item","index","$orig","__get_orig","g2","$u","guid","_isMounted","e0","$event","popupShow","e1","confirmShow","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","timestamp","visitorPersonCount","text","style","backgroundColor","width","obj","visitorNo","linkUrl","qrcodeBase64","canvasImgBaise64","removeIndex","timer","staticPrefix","ctx","onLoad","onShareAppMessage","title","path","onUnload","clearTimeout","methods","erweimaR","initCanvas","shareInvitationCodeClick","setTimeout","swipeClick","handleConfirm","id","type","initData","arr","show","targetEmpName","visitorArea","visitorTime","invitationExpireTime","visitorState","levalTime","empName","backClick","url"],"mappings":"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","file":"pageFk/retinue-details/retinue-details.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageFk/retinue-details/retinue-details.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./retinue-details.vue?vue&type=template&id=4857f4ba&scoped=true&\"\nvar renderjs\nimport script from \"./retinue-details.vue?vue&type=script&lang=js&\"\nexport * from \"./retinue-details.vue?vue&type=script&lang=js&\"\nimport style0 from \"./retinue-details.vue?vue&type=style&index=0&id=4857f4ba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4857f4ba\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageFk/retinue-details/retinue-details.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./retinue-details.vue?vue&type=template&id=4857f4ba&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uCountDown: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-count-down/u-count-down\" */ \"@/uni_modules/uview-ui/components/u-count-down/u-count-down.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/uni_modules/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item\" */ \"@/uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item.vue\"\n      )\n    },\n    uAvatar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-avatar/u-avatar\" */ \"@/uni_modules/uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-tag/u-tag\" */ \"@/uni_modules/uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    tkiQrcode: function () {\n      return import(\n        /* webpackChunkName: \"components/tki-qrcode/tki-qrcode\" */ \"@/components/tki-qrcode/tki-qrcode.vue\"\n      )\n    },\n    myButton: function () {\n      return import(\n        /* webpackChunkName: \"components/my-button\" */ \"@/components/my-button.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.retinueEmpArr.length\n  var g1 = _vm.retinueEmpArr.length || _vm.otherEmpArr.length\n  var l0 = g1\n    ? _vm.__map(_vm.retinueEmpArr, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g2 = _vm.$u.guid()\n        return {\n          $orig: $orig,\n          g2: g2,\n        }\n      })\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.popupShow = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.confirmShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./retinue-details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./retinue-details.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<movable-area style=\"width: 100%; height: 100%\">\r\n\t\t  <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n\t\t    <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n\t\t  </movable-view>\r\n\t\t\t\r\n\t\t\t<scroll-view scroll-y style=\"height: calc(100% - 67px);width: 100%;\">\r\n\t\t\t\t<my-card :showFoot=\"false\" :showHead=\"false\" margin=\"0 0 40rpx\">\r\n\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center\">\r\n\t\t\t\t\t\t<view class=\"u-flex-1\">\r\n\t\t\t\t\t\t\t<text class=\"u-font-36 fw700\">已生成邀请码</text>\r\n\t\t\t\t\t\t\t<view class=\"u-m-t-20 u-error\" v-if=\"timestamp >= 0 && obj.visitorState == 8\">\r\n\t\t\t\t\t\t\t\t<text class=\"u-m-r-10\">距离失效</text>\r\n\t\t\t\t\t\t\t\t<u-count-down :time=\"timestamp\"></u-count-down>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-else class=\"u-m-t-20 u-error\">邀请码已失效</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-image \r\n\t\t\t\t\t\t\tsrc=\"http://qs.aiwld.com.cn/static/app/linktop.png\" \r\n\t\t\t\t\t\t\twidth=\"150rpx\" height=\"150rpx\" \r\n\t\t\t\t\t\t\tcustomStyle=\"margin:0 auto;\"></u-image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</my-card>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"u-m-20\">{{vuex_useInfo.bindEmpType == 2 ? '邀约' : '随行'}}人员（{{ retinueEmpArr.length }}/{{ visitorPersonCount }}）</view>\r\n\t\t\t\t<my-card :showFoot=\"false\" :showHead=\"false\" margin=\"0 20rpx\" v-if=\"retinueEmpArr.length || otherEmpArr.length\">\r\n\t\t\t\t\t<u-swipe-action>\r\n\t\t\t\t\t\t<u-swipe-action-item \r\n\t\t\t\t\t\t\tv-for=\"(item, index) in retinueEmpArr\" :key=\"$u.guid()\"\r\n\t\t\t\t\t\t\t:options=\"options\"\r\n\t\t\t\t\t\t\t:disabled=\"!(obj.visitorState == 8 || obj.visitorState == 1)\"\r\n\t\t\t\t\t\t\t@click=\"swipeClick($event,index)\">\r\n\t\t\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center u-border-bottom u-p-t-20 u-p-b-20\">\r\n\t\t\t\t\t\t\t\t<view class=\"u-flex u-col-center fw700 u-width-70\">\r\n\t\t\t\t\t\t\t\t\t<u-avatar :src=\"staticPrefix + item.visitorImgUrl2\"></u-avatar>\r\n\t\t\t\t\t\t\t\t\t<view class=\"u-width-70 u-line-2 u-m-l-20\">{{item.visitorName}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<u-tag class=\"u-p-t-10 u-p-b-10 u-m-r-10\" text=\"邀请成功\" type=\"success\" size=\"mini\" mode=\"dark\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-swipe-action-item>\r\n\t\t\t\t\t</u-swipe-action>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(item,index) in otherEmpArr\" :key=\"index\" \r\n\t\t\t\t\t\tclass=\"u-flex u-row-between u-col-center u-border-bottom u-p-t-20 u-p-b-20\">\r\n\t\t\t\t\t\t<view class=\"u-flex u-col-center fw700\">\r\n\t\t\t\t\t\t\t<u-avatar src=\"\"></u-avatar>\r\n\t\t\t\t\t\t\t<text class=\"u-light-color u-m-l-20\">暂无人员信息</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-tag text=\"邀请中\" type=\"info\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</my-card>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"u-tips-color u-m-t-20 u-p-20\">邀请时间失效或{{vuex_useInfo.bindEmpType == 2 ? '邀约' : '随行'}}人员已满则自动提交，待审批后生效</view>\r\n\t\t\t\t<view style=\"opacity: 0;position: absolute;bottom: 0;z-index: 0;\">\r\n\t\t\t\t\t<tki-qrcode\r\n\t\t\t\t\t  ref=\"qrcode\" \r\n\t\t\t\t\t  :val=\"linkUrl\" \r\n\t\t\t\t\t  :size=\"560\" \r\n\t\t\t\t\t  @result=\"erweimaR\" \r\n\t\t\t\t\t  :loadMake=\"true\" \r\n\t\t\t\t\t\t:showLoading=\"false\"\r\n\t\t\t\t\t  :onval=\"true\" />\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</movable-area>\r\n\t\t\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t<my-button @click=\"shareInvitationCodeClick\">分享邀请码</my-button>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<my-button open-type=\"share\">分享邀请码</my-button>\r\n\t\t<!-- #endif -->\r\n\t\t\r\n\t\t<u-popup :show=\"popupShow\" mode=\"center\" round=\"30\" @close=\"popupShow = false\">\r\n\t\t\t<view class=\"u-text-center\">\r\n\t\t\t\t<u-image :src=\"canvasImgBaise64\" width=\"330px\" height=\"460px\"></u-image>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t\r\n\t\t<u-modal \r\n\t\t\t:show=\"confirmShow\" \r\n\t\t\ttitle=\"提示:\" content=\"确定要删除？\" showCancelButton \r\n\t\t\t@confirm=\"handleConfirm\"\r\n\t\t\t@cancel=\"confirmShow = false\"></u-modal>\r\n\t\t<u-toast ref=\"uToast\" />\r\n\t\t\r\n\t\t<canvas v-if=\"canvasImgBaise64 == ''\" style=\"width: 330px; height: 460px;position: fixed;top: 9999999px;\" canvas-id=\"myCanvas\" id=\"myCanvas\"></canvas>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/config/index.js'\r\n\timport tkiQrcode from '@/components/tki-qrcode/tki-qrcode.vue';\r\n\timport { details, retinueRemove } from '../api/approval.js';\r\n\t\r\n\texport default {\r\n\t\tcomponents: { tkiQrcode },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttimestamp:0,\r\n\t\t\t\tretinueEmpArr:[],\r\n\t\t\t\tvisitorPersonCount:0,\r\n\t\t\t\totherEmpArr:[],\r\n\t\t\t\toptions: [{ text: '删除', style: { backgroundColor: '#dd524d', width: '150rpx' } }],\r\n\t\t\t\tpopupShow:false,\r\n\t\t\t\tobj:{},\r\n\t\t\t\tvisitorNo:\"\",\r\n\t\t\t\tlinkUrl:\"\",\r\n\t\t\t\tqrcodeBase64:\"\",\r\n\t\t\t\tcanvasImgBaise64:\"\",\r\n\t\t\t\tconfirmShow:false,\r\n\t\t\t\tremoveIndex:\"\",\r\n\t\t\t\ttimer:null,\r\n\t\t\t\tstaticPrefix:\"\",\r\n\t\t\t\tctx:\"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tconst visitorNo = option.visitorNo;\r\n\t\t\tconst BASE_URL = config.baseUrl;\r\n\t\t\tthis.linkUrl = `${config.linkUrl}/#/pageFk/retinue-formlink/retinue-formlink?N=${visitorNo}&appId=${this.vuex_urlobj.appId}&S=${this.vuex_cfg.isShowSourceAddr}&T=${this.vuex_useInfo.bindEmpType == 2 ? 'targetInvite' : 'appointment'}&C=${this.vuex_cfg.isShowCertificate}&DT=${this.vuex_cfg.dateType}`\r\n\t\t\tthis.visitorNo = visitorNo;\r\n\t\t\tthis.canvasImgBaise64 = \"\";\r\n\t\t\tthis.initData();\r\n\t\t},\r\n\t\tonShareAppMessage(res){\r\n\t\t\tconsole.log(res)\r\n\t\t\tlet path = `/pageFk/retinue-formlink/retinue-formlink?N=${this.visitorNo}&appId=${this.vuex_urlobj.appId}&S=${this.vuex_cfg.isShowSourceAddr}&T=${this.vuex_useInfo.bindEmpType == 2 ? 'targetInvite' : 'appointment'}&C=${this.vuex_cfg.isShowCertificate}&DT=${this.vuex_cfg.dateType}&sid=${this.vuex_urlobj.sid}`\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '自定义分享标题',\r\n\t\t\t\tpath: path,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearTimeout(this.timer)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\terweimaR(e){\r\n\t\t\t\tthis.qrcodeBase64 = e;\r\n\t\t\t},\r\n\t\t\tinitCanvas(){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tvar ctx = uni.createCanvasContext('myCanvas');\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl:'https://qs.aiwld.com.cn/static/app/canvas_bg.png',\r\n\t\t\t\t\t\tsuccess:({tempFilePath}) => {\r\n\t\t\t\t\t\t\tctx.drawImage(tempFilePath,0, 0,330,461);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.setFillStyle('#000');\r\n\t\t\t\t\t\t\tctx.setFontSize(14);\r\n\t\t\t\t\t\t\tctx.setTextAlign('center');\r\n\t\t\t\t\t\t\tctx.fillText('访客邀约',165,75);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.setFontSize(12);\r\n\t\t\t\t\t\t\tctx.setTextAlign('left');\r\n\t\t\t\t\t\t\tlet empNameWidth = 40;\r\n\t\t\t\t\t\t\tif(this.vuex_useInfo.bindEmpType != 2){\r\n\t\t\t\t\t\t\t\tlet empName = this.obj.empName.length > 10 ? this.obj.empName.substr(0,10)+'...' : this.obj.empName;\r\n\t\t\t\t\t\t\t\tctx.fillText(empName,40,110);\r\n\t\t\t\t\t\t\t\tempNameWidth = ctx.measureText(empName).width + 60;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.setFillStyle('#909993');\r\n\t\t\t\t\t\t\tctx.fillText(`诚邀您${this.vuex_useInfo.bindEmpType == 2 ? '到访' : '随行'}`,empNameWidth,110);\r\n\t\t\t\t\t\t\tctx.fillText(\"到访区域：\",40,140);\r\n\t\t\t\t\t\t\tctx.fillText(\"被访人：\",190,140);\r\n\t\t\t\t\t\t\tctx.fillText(\"到访时间：\",40,180);\r\n\t\t\t\t\t\t\tctx.fillText(\"离访时间：\",190,180);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.setFillStyle('#000');\r\n\t\t\t\t\t\t\tlet str = this.obj.visitorArea;\r\n\t\t\t\t\t\t\tlet strWidth = ctx.measureText(str).width;\r\n\t\t\t\t\t\t\tconst ellipsis = '…';\r\n\t\t\t\t\t\t\tconst ellipsisWidth = ctx.measureText(ellipsis).width;\r\n\t\t\t\t\t\t\tif (strWidth <= 140 || 140 <= ellipsisWidth) {\r\n\t\t\t\t\t\t\t\tctx.fillText(str,40,160);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar len = str.length;\r\n\t\t\t\t\t\t\t\tfor(let i = len;i>0;i--){\r\n\t\t\t\t\t\t\t\t\tif(strWidth >= 140 - ellipsisWidth){\r\n\t\t\t\t\t\t\t\t\t\tstr = str.slice(0, i);\r\n\t\t\t\t\t\t\t\t\t\tstrWidth = ctx.measureText(str).width;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tctx.fillText(str + ellipsis,40,160);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.fillText(this.obj.targetEmpName.length > 8 ? this.obj.targetEmpName.substr(0,8)+'...' : this.obj.targetEmpName,190,160);\r\n\t\t\t\t\t\t\tctx.fillText(this.obj.visitorTime,40,200);\r\n\t\t\t\t\t\t\tctx.fillText(this.obj.levalTime,190,200);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.setFillStyle('#2979ff');\r\n\t\t\t\t\t\t\tctx.setTextAlign('center');\r\n\t\t\t\t\t\t\tlet text = `二维码有效期至：${this.obj.invitationExpireTime}`\r\n\t\t\t\t\t\t\tctx.fillText(text,165,220);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.drawImage(this.qrcodeBase64,85, 230, 150, 150);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.setFillStyle('#909993');\r\n\t\t\t\t\t\t\tctx.fillText(\"微信扫一扫或长按识别\",165,400);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctx.draw(true,(ret) => {\r\n\t\t\t\t\t\t\t\tuni.canvasToTempFilePath({ // 保存canvas为图片\r\n\t\t\t\t\t\t\t\t\tcanvasId: 'myCanvas',\r\n\t\t\t\t\t\t\t\t\tquality: 1,\r\n\t\t\t\t\t\t\t\t\tsuccess:({ tempFilePath })=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.canvasImgBaise64 = tempFilePath\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshareInvitationCodeClick(){\r\n\t\t\t\tthis.popupShow = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.initCanvas()\r\n\t\t\t\t},100)\r\n\t\t\t},\r\n\t\t\tswipeClick(e,index) {\r\n\t\t\t  if (e.index == 0) {\r\n\t\t\t\t\tthis.removeIndex = index;\r\n\t\t\t\t\tthis.confirmShow = true;\r\n\t\t\t  }\r\n\t\t\t},\r\n\t\t\thandleConfirm(){\r\n\t\t\t\tlet item = this.retinueEmpArr[this.removeIndex];\r\n\t\t\t\tretinueRemove({id:item.id}).then(r => {\r\n\t\t\t\t\tthis.$refs.uToast.show({ message: r.data.msg, type: 'success' });\r\n\t\t\t\t\tthis.retinueEmpArr.splice(this.removeIndex, 1);\r\n\t\t\t\t\tthis.initData();\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$refs.uToast.show({ message: err, type: 'error' });\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitData(){\r\n\t\t\t\tdetails({visitorNo:this.visitorNo}).then(r => {\r\n\t\t\t\t\tif(r.data.code === 200){\r\n\t\t\t\t\t\tlet d = r.data.data;\r\n\t\t\t\t\t\tthis.staticPrefix = d.staticPrefix;\r\n\t\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\tif(this.vuex_useInfo.bindEmpType == 2){\r\n\t\t\t\t\t\t\tarr = d.visitors.filter(v => v.visitorCertificateCode)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tarr = d.visitors.length > 1 ? d.visitors.slice(1) : []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet arr2 = arr.map(v => ({...v,show:false}));\r\n\t\t\t\t\t\tthis.visitorPersonCount = d.visitorPersonCount;\r\n\t\t\t\t\t\tthis.retinueEmpArr = arr2;\r\n\t\t\t\t\t\tthis.otherEmpArr = new Array(d.visitorPersonCount - arr2.length).fill('');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet serverTime = new Date(this.iosTransDate(d.serverTime)).getTime();\r\n\t\t\t\t\t\tlet diff =  new Date(this.iosTransDate(d.invitationExpireTime)).getTime() - serverTime;\r\n\t\t\t\t\t\tthis.timestamp = diff;\r\n\t\t\t\t\t\tlet {levalTime,targetEmpName,visitorArea,visitorTime,invitationExpireTime,visitorState} = d;\r\n\t\t\t\t\t\tlet empName = d.visitors[0].visitorName;\r\n\t\t\t\t\t\tlevalTime = this.vuex_cfg.dateType === 'date' ? levalTime.substr(0,10) : levalTime.substr(0,16);\r\n\t\t\t\t\t\tvisitorTime = this.vuex_cfg.dateType === 'date' ? visitorTime.substr(0,10) : visitorTime.substr(0,16);\r\n\t\t\t\t\t\tthis.obj = {levalTime,targetEmpName,visitorArea,visitorTime,empName,invitationExpireTime,visitorState};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(diff/1000 > 0 && visitorState == 8){\r\n\t\t\t\t\t\t\tclearTimeout(this.timer);\r\n\t\t\t\t\t\t\tthis.timer = setTimeout(() => {this.initData()},10000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbackClick(){\r\n\t\t\t\tif(this.vuex_urlobj.token){\r\n\t\t\t\t\treturn uni.redirectTo({ url:'../inviteRecord/inviteRecord' }) \r\n\t\t\t\t}\r\n\t\t\t\treturn uni.redirectTo({ url:'../appointmentrecord/appointmentrecord' })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/deep/.u-count-down__text{\r\n\t\tcolor: $u-error !important;\r\n\t\tfont-size: 28rpx !important;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./retinue-details.vue?vue&type=style&index=0&id=4857f4ba&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./retinue-details.vue?vue&type=style&index=0&id=4857f4ba&lang=scss&scoped=true&\""],"sourceRoot":""}