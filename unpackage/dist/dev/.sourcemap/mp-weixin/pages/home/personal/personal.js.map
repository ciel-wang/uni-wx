{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HWD/test/pages/home/personal/personal.vue?4cfd","webpack:///F:/HWD/test/pages/home/personal/personal.vue?a1a2","webpack:///F:/HWD/test/pages/home/personal/personal.vue?d6f9","webpack:///F:/HWD/test/pages/home/personal/personal.vue?a548","uni-app:///pages/home/personal/personal.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","uGap","myCard","uNoticeBar","uImage","uCell","uTag","uButton","uPopup","uModal","uOverlay","uToast","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","userInfo","faceUrl","Date","getTime","_isMounted","e0","$event","$u","route","phone","empPhone","empId","e1","parent","parentsPhone","e2","modalShow","modalContent","btnType","e3","carShow","e4","type","e5","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","carNumValue","carInfos","carId","maskShow","onLoad","methods","handleEdit","id","handleDelet","carNumClick","updateFaceUrl","uni","count","success","url","header","name","filePath","studentListClick","accountClick","handleSwitchIdentities","initPageData","modalConfirm","setTimeout","backClick"],"mappings":"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","file":"pages/home/personal/personal.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/personal/personal.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./personal.vue?vue&type=template&id=de297f90&\"\nvar renderjs\nimport script from \"./personal.vue?vue&type=script&lang=js&\"\nexport * from \"./personal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/personal/personal.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./personal.vue?vue&type=template&id=de297f90&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uGap: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-gap/u-gap\" */ \"@/uni_modules/uview-ui/components/u-gap/u-gap.vue\"\n      )\n    },\n    myCard: function () {\n      return import(\n        /* webpackChunkName: \"components/my-card\" */ \"@/components/my-card.vue\"\n      )\n    },\n    uNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uni_modules/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uCell: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-cell/u-cell\" */ \"@/uni_modules/uview-ui/components/u-cell/u-cell.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-tag/u-tag\" */ \"@/uni_modules/uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.userInfo.faceUrl && _vm.userInfo.faceUrl + \"?\" + new Date().getTime()\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      return _vm.$u.route(\"/pageZ/update-phone/update-phone\", {\n        phone: _vm.userInfo.empPhone,\n        empId: _vm.userInfo.empId,\n      })\n    }\n    _vm.e1 = function ($event) {\n      return _vm.$u.route(\"/pageZ/update-phone/update-phone\", {\n        phone: _vm.userInfo.parent.parentsPhone,\n        empId: _vm.userInfo.empId,\n      })\n    }\n    _vm.e2 = function ($event) {\n      _vm.modalShow = true\n      _vm.modalContent = \"您确定解除绑定？\"\n      _vm.btnType = \"userUnbind\"\n    }\n    _vm.e3 = function ($event) {\n      _vm.carShow = false\n    }\n    _vm.e4 = function ($event) {\n      _vm.carShow = false\n      _vm.$u.route(\"/pageZ/update-carNum/update-carNum\", {\n        type: \"add\",\n      })\n    }\n    _vm.e5 = function ($event) {\n      _vm.modalShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./personal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./personal.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<movable-area style=\"width: 100%; height: 100%\">\r\n\t\t  <movable-view direction=\"all\" :out-of-bounds=\"false\">\r\n\t\t\t\t <u-icon name=\"fanhui2\" custom-prefix=\"custom-icon\" size=\"80\" color=\"#909399\" @click=\"backClick\"></u-icon>\r\n\t\t  </movable-view>\r\n\t\t\t\r\n\t\t\t<u-gap height=\"20\" bgColor=\"#f8f8f8\"></u-gap>\r\n\t\t\t<my-card padding=\"0\" margin=\"0 20rpx 20rpx\">\r\n\t\t\t\t<view class=\"u-cell u-flex u-row-between bgfff\" style=\"padding: 26rpx 32rpx;\" v-show=\"userInfo.bindEmpType != 3\">\r\n\t\t\t\t\t<view class=\"u-flex\">\r\n\t\t\t\t\t\t<u-icon size=\"32\" name=\"zu7329\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t\t\t<text>个人头像</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<u-notice-bar \r\n\t\t\t\t\t\tduration=\"4000\"\r\n\t\t\t\t\t\tcustomStyle=\"width:40%;padding:10rpx 4rpx;\"\r\n\t\t\t\t\t\tv-if=\"userInfo.faceAuditState >= 0 && userInfo.faceAuditState != 1\"\r\n\t\t\t\t\t\t:text=\"userInfo.faceAuditState == 0 ? '照片上传成功，等待审核中...' : userInfo.faceAuditState == 1 ? '已通过' : userInfo.faceAuditState == 2 ? `管理员已拒绝，原因：${userInfo.rejectCause || ''}` : ''\">\r\n\t\t\t\t\t</u-notice-bar>\r\n\t\t\t\t\t<u-image :src=\"userInfo.faceUrl && userInfo.faceUrl+'?'+new Date().getTime()\" width=\"100rpx\" height=\"100rpx\" shape=\"circle\" @click=\"updateFaceUrl\"></u-image>\r\n\t\t\t\t</view>\r\n\t\t\t</my-card>\r\n\t\t\t\r\n\t\t\t<my-card padding=\"0\" margin=\"0 20rpx 20rpx\">\r\n\t\t\t\t<u-cell title=\"学号\" :value=\"userInfo.empCode\" v-if=\"userInfo.bindEmpType == 1\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"xuehaoguanli\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell  \r\n\t\t\t\t  title=\"手机号\"\r\n\t\t\t\t  v-if=\"userInfo.bindEmpType == 2\" \r\n\t\t\t\t  :value=\"userInfo.empPhone\"\r\n\t\t\t\t  @click=\"$u.route('/pageZ/update-phone/update-phone',{phone:userInfo.empPhone,empId:userInfo.empId})\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"shouji\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell\r\n\t\t\t\t  title=\"手机号\" \r\n\t\t\t\t  v-if=\"userInfo.bindEmpType == 3\" \r\n\t\t\t\t  :value=\"userInfo.parent.parentsPhone\"\r\n\t\t\t\t  @click=\"$u.route('/pageZ/update-phone/update-phone',{phone:userInfo.parent.parentsPhone,empId:userInfo.empId})\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"shouji\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell \r\n\t\t\t\t  title=\"车牌号\"\r\n\t\t\t\t  v-if=\"userInfo.bindEmpType == 2\"\r\n\t\t\t\t\t@click=\"carNumClick\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"chepaihao\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t\t<view slot=\"value\">\r\n\t\t\t\t\t\t<u-tag v-if=\"carNumValue\" :text=\"carNumValue\" type=\"primary\" shape=\"circle\" size=\"medium\"/>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-cell>\r\n\t\t\t</my-card>\r\n\t\t\t\r\n\t\t\t<my-card padding=\"0\" margin=\"0 20rpx 20rpx\">\r\n\t\t\t\t<u-cell  title=\"学生头像\" @click=\"updateFaceUrl\" v-if=\"userInfo.bindEmpType == 3\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"zu7329\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t\t<u-image slot=\"right-icon\" :src=\"userInfo.faceUrl\" width=\"100rpx\" height=\"100rpx\" border-radius=\"100rpx\"></u-image>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell title=\"学生姓名\" v-if=\"userInfo.bindEmpType == 3\" :value=\"userInfo.empName\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"xingming\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell title=\"学生学号\" v-if=\"userInfo.bindEmpType == 3\" :value=\"userInfo.empCode\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"xuehaoguanli\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell title=\"学校\" :value=\"userInfo.schoolName\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"xuexiao\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell title=\"班级\" v-if=\"userInfo.bindEmpType != 2\" :value=\"userInfo.gradeName + userInfo.className || ''\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"banji\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t\t<u-cell \r\n\t\t\t\t  title=\"学生列表\" \r\n\t\t\t\t  v-if=\"userInfo.bindEmpType == 2\" \r\n\t\t\t\t  @click=\"studentListClick\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"xueshengliebiao\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t</my-card>\r\n\t\t\t\r\n\t\t\t<my-card padding=\"0\" margin=\"0 20rpx 20rpx\">\r\n\t\t\t\t<u-cell title=\"账户与安全\" @click=\"accountClick\">\r\n\t\t\t\t  <u-icon slot=\"icon\" size=\"32\" name=\"zhanghuyuanquan\" custom-prefix=\"custom-icon\" customStyle=\"margin-right:10rpx;\"></u-icon>\r\n\t\t\t\t</u-cell>\r\n\t\t\t</my-card>\r\n\t\t\t\r\n\t\t\t<u-button\r\n\t\t\t\tcustomStyle=\"width:60%;margin-top:80rpx;\" type=\"info\" shape=\"square\" \r\n\t\t\t\t@click=\"handleSwitchIdentities\">切换身份</u-button>\r\n\t\t\t\t\r\n\t\t\t<u-button\r\n\t\t\t\tcustomStyle=\"width:60%;margin-top:30rpx;\" type=\"error\" shape=\"square\" \r\n\t\t\t\t@click=\"modalShow = true;modalContent = '您确定解除绑定？';btnType = 'userUnbind';\">解除绑定</u-button>\r\n\t\t</movable-area> \r\n\t\t\r\n\t\t<u-popup :show=\"carShow\" height=\"840\" closeable @close=\"carShow = false\">\r\n\t\t  <view>\r\n\t\t    <view class=\"u-p-30 u-text-center u-font-32 fw700\">我的车库</view>\r\n\t\t    \r\n\t\t    <scroll-view scroll-y style=\"height: 610rpx;\">\r\n\t\t\t\t\t<my-card margin=\"0 20rpx\">\r\n\t\t\t\t\t\t<view class=\"u-flex u-row-between u-m-b-30\" v-for=\"v in carInfos\" :key=\"v.id\">\r\n\t\t\t\t\t\t  <view class=\"u-width-66\">{{v.plateNum}}</view>\r\n\t\t\t\t\t\t  <view class=\"u-width-30 u-flex u-row-between\">\r\n\t\t\t\t\t\t    <u-icon name=\"edit-pen\" size=\"50\" class=\"u-m-r-60\" @click=\"handleEdit(v.id)\"></u-icon>\r\n\t\t\t\t\t\t    <u-icon name=\"minus-circle\" size=\"50\" @click=\"handleDelet(v.id)\"></u-icon>\r\n\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</my-card>\r\n\t\t    </scroll-view>\r\n\t\t    \r\n\t\t    <view class=\"u-p-t-20 u-p-b-20\">\r\n\t\t      <u-button \r\n\t\t\t\t\t\tcustomStyle=\"width:60%;\" type=\"primary\" shape=\"circle\" \r\n\t\t\t\t\t\t@click=\"carShow = false;$u.route('/pageZ/update-carNum/update-carNum',{type:'add'});\">添加新的爱车</u-button>\r\n\t\t    </view>\r\n\t\t  </view>\r\n\t\t</u-popup>\r\n\t\t\r\n\t\t<u-modal :show=\"modalShow\" title=\"提示\" :content='modalContent' showCancelButton @confirm=\"modalConfirm\" @cancel=\"modalShow = false\"></u-modal>\r\n\t\t\r\n\t\t<u-overlay :show=\"maskShow\">\r\n\t\t\t<view class=\"w-overlay\">正在上传，请等待...</view>\r\n\t\t</u-overlay>\r\n\t\t<u-toast ref=\"uToast\" />\r\n\t</view>\n</template>\n\n<script>\r\n\timport {userInfo, userUnbind ,uploadFaceimg,removePlatenum } from '@/api/home/home.js'\r\n\timport config from '@/config/index.js'\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuserInfo:{},\r\n\t\t\t\tcarNumValue:\"\",\r\n\t\t\t\tcarShow:false,\r\n\t\t\t\tcarInfos:[],\r\n\t\t\t\tcarId:\"\",\r\n\t\t\t\tmodalShow:false,\r\n\t\t\t\tmodalContent:'',\r\n\t\t\t\tbtnType:'',\r\n\t\t\t\tmaskShow:false,\r\n\t\t\t}\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.initPageData();\r\n\t\t},\n\t\tmethods: {\r\n\t\t\thandleEdit(id){\r\n\t\t\t  this.$u.route('/pageZ/update-carNum/update-carNum',{type:'edit',id})\r\n\t\t\t},\r\n\t\t\thandleDelet(id){\r\n\t\t\t  this.carShow = false;\r\n\t\t\t  this.modelShow = true\r\n\t\t\t  this.btnType = 'car'\r\n\t\t\t  this.modelContent = \"您确定要删除此车辆信息？\"\r\n\t\t\t  this.carId = id;\r\n\t\t\t},\r\n\t\t\tcarNumClick(){\r\n\t\t\t  if(!this.carNumValue){\r\n\t\t\t    this.$u.route('/pageZ/update-carNum/update-carNum',{type:'add'})\r\n\t\t\t  }else{\r\n\t\t\t    this.carShow = true;\r\n\t\t\t  }\r\n\t\t\t},\r\n\t\t\tupdateFaceUrl(){\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount:1,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl:`${config.baseUrl}/iot-wx/user/upload/faceimg`,\r\n\t\t\t\t\t\t\theader:{'token':this.vuex_urlobj.token},\r\n\t\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\t\tfilePath:res.tempFilePaths[0],\r\n\t\t\t\t\t\t\tsuccess: (r) => {\r\n\t\t\t\t\t\t\t\tlet data =JSON.parse(r.data);\r\n\t\t\t\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\t\t\t\tthis.$refs.uToast.show({ message: data.msg, type: \"success\" });\r\n\t\t\t\t\t\t\t\t\tthis.initPageData();\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthis.maskShow = false;\r\n\t\t\t\t\t\t\t\t\tthis.$refs.uToast.show({ message: data.msg, type: \"error\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstudentListClick(){\r\n\t\t\t  uni.navigateTo({ url:'/pageZ/student-list/student-list' })\r\n\t\t\t},\r\n\t\t\taccountClick(){\r\n\t\t\t  uni.navigateTo({\r\n\t\t\t    url:`/pageZ/account-security/account-security?accountState=${this.userInfo.accountState}&cardState=${this.userInfo.cardState}&qrCodeState=${this.userInfo.qrCodeState}`\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t\thandleSwitchIdentities(){\r\n\t\t\t  let bindId = this.userInfo.empId+'_'+this.userInfo.bindEmpType\r\n\t\t\t  uni.navigateTo({ url:`../switch-identities/switch-identities?bindId=${bindId}` })\r\n\t\t\t},\r\n\t\t\tinitPageData(){\r\n\t\t\t\tuserInfo().then(res => {\r\n\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t      let data = res.data.data;\r\n\t\t\t      this.userInfo = data;\r\n\t\t\t\t\t\tthis.carInfos = data.carInfos || [];\r\n\t\t\t\t\t\tthis.carNumValue = data?.carInfos ? data?.carInfos[data.carInfos.length -1]?.plateNum : '';\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmodalConfirm(){\r\n\t\t\t\tif(this.btnType == 'userUnbind'){\r\n\t\t\t\t  userUnbind().then(res => {\r\n\t\t\t\t  \tif(res.data.code == 200){\r\n\t\t\t\t  \t\tthis.$refs.uToast.show({ message: res.data.msg, type: \"success\" });\r\n\t\t\t\t  \t  uni.removeStorageSync('urlobj_key');\r\n\t\t\t\t\t\t\tuni.removeStorageSync('vuex_urlobj');\r\n\t\t\t\t\t\t\tuni.removeStorageSync('vuex_menuAuth');\r\n\t\t\t\t\t\t\tthis.modalShow = false;\r\n\t\t\t\t  \t\tsetTimeout(() => {\r\n\t\t\t\t  \t    uni.navigateTo({ url:\"../switch-identities/switch-identities\" })\r\n\t\t\t\t  \t\t},2000)\r\n\t\t\t\t  \t}\r\n\t\t\t\t  }).catch(err => {\r\n\t\t\t\t\t\tthis.modalShow = false;\r\n\t\t\t\t\t\tthis.$refs.uToast.show({ message: err, type: \"error\" });\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tremovePlatenum({id:this.carId}).then(res => {\r\n\t\t\t\t  this.carId = ''\r\n\t\t\t\t  if(res.data.code == 200){\r\n\t\t\t\t  \tthis.$refs.uToast.show({ message: res.data.msg, type: \"success\" });\r\n\t\t\t\t    this.initPageData();\r\n\t\t\t\t  }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$refs.uToast.show({ message: err, type: \"error\" });\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\tbackClick(){\r\n\t\t\t\tuni.switchTab({ url:'/pages/home/home' })\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}