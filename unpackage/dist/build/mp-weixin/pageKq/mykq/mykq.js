require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageKq/mykq/mykq"],{"463c":function(e,t,a){"use strict";var r=a("665b"),o=a.n(r);o.a},"665b":function(e,t,a){},"6ee8":function(e,t,a){"use strict";(function(e,t){var r=a("4ea4");a("5495");r(a("66fd"));var o=r(a("c322"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(o.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"740d1":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return r}));var r={uIcon:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(a.bind(null,"1e79"))},myCard:function(){return a.e("components/my-card").then(a.bind(null,"2227"))},myTimeAxis:function(){return a.e("components/my-time-axis").then(a.bind(null,"405c"))},uCellGroup:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-cell-group/u-cell-group")]).then(a.bind(null,"f7ef"))},uCell:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(a.bind(null,"0137"))},uToast:function(){return a.e("uni_modules/uview-ui/components/u-toast/u-toast").then(a.bind(null,"b688"))}},o=function(){var e=this,t=e.$createElement,a=(e._self._c,e.form.predictWorktimeMinute&&(e.form.predictWorktimeMinute/60).toFixed(2)||0),r=(new Date).getTime()<new Date(e.form.start1).getTime()&&!e.form.timestep1SworkTime,o=(new Date).getTime()>new Date(e.form.start1).getTime()&&!e.form.timestep1SworkTime,m=(new Date).getTime()>new Date(e.form.start1).getTime()&&!e.form.timestep1SworkTime,n=2!=e.form.dayMode?(new Date).getTime()>new Date(e.form.start1).getTime()&&e.mode1e&&e.form.end1:null,i=(new Date).getTime()<new Date(e.form.end1).getTime()&&!e.form.timestep1EworkTime,s=(new Date).getTime()>new Date(e.form.end1).getTime()&&!e.form.timestep1EworkTime,d=(new Date).getTime()>new Date(e.form.end1).getTime()&&!e.form.timestep1EworkTime,u=2!=e.form.dayMode?(new Date).getTime()>new Date(e.form.end1).getTime()&&e.mode2s&&e.form.start2:null,c=(new Date).getTime()<new Date(e.form.start2).getTime()&&!e.form.timestep2SworkTime,f=(new Date).getTime()>new Date(e.form.start2).getTime()&&!e.form.timestep2SworkTime,l=(new Date).getTime()>new Date(e.form.start2).getTime()&&!e.form.timestep2SworkTime,g=2!=e.form.dayMode?(new Date).getTime()>new Date(e.form.start2).getTime()&&e.mode2e&&e.form.end2:null,T=(new Date).getTime()<new Date(e.form.end2).getTime()&&!e.form.timestep2EworkTime,D=(new Date).getTime()>new Date(e.form.end2).getTime()&&!e.form.timestep2EworkTime,w=(new Date).getTime()>new Date(e.form.end2).getTime()&&!e.form.timestep2EworkTime,y=2!=e.form.dayMode?(new Date).getTime()>new Date(e.form.end2).getTime()&&e.mode3s&&e.form.start3:null,h=(new Date).getTime()<new Date(e.form.start3).getTime()&&!e.form.timestep3SworkTime,p=(new Date).getTime()>new Date(e.form.start3).getTime()&&!e.form.timestep3SworkTime,k=(new Date).getTime()>new Date(e.form.start3).getTime()&&!e.form.timestep3SworkTime,b=2!=e.form.dayMode?(new Date).getTime()>new Date(e.form.start3).getTime()&&e.mode3e&&e.form.end3:null,v=(new Date).getTime()<new Date(e.form.end1).getTime()&&!e.form.timestep3EworkTime,S=(new Date).getTime()>new Date(e.form.end1).getTime()&&!e.form.timestep3EworkTime,_=(new Date).getTime()>new Date(e.form.end1).getTime()&&!e.form.timestep3EworkTime,M=e.form.qjArr.length>0||e.form.ccArr.length>0||e.form.jbArr.length>0,q=e.form.qjArr.length,W=q>0?e.__map(e.form.qjArr,(function(t,a){var r=e.__get_orig(t),o=t.startTime&&t.startTime.substr(0,16),m=t.endTime&&t.endTime.substr(0,16);return{$orig:r,g26:o,g27:m}})):null,j=e.form.ccArr.length,A=j>0?e.__map(e.form.ccArr,(function(t,a){var r=e.__get_orig(t),o=t.startTime&&t.startTime.substr(0,16),m=t.endTime&&t.endTime.substr(0,16);return{$orig:r,g29:o,g30:m}})):null,x=e.form.jbArr.length,$=x>0?e.__map(e.form.jbArr,(function(t,a){var r=e.__get_orig(t),o=(t.dayMinute/60).toFixed(2);return{$orig:r,g32:o}})):null,C=e.summaryData.qjHour&&(e.summaryData.qjHour/60).toFixed(2)||0,E=(e.summaryData.absenteeismMinuteTotal/60).toFixed(2);e.$mp.data=Object.assign({},{$root:{g0:a,g1:r,g2:o,g3:m,g4:n,g5:i,g6:s,g7:d,g8:u,g9:c,g10:f,g11:l,g12:g,g13:T,g14:D,g15:w,g16:y,g17:h,g18:p,g19:k,g20:b,g21:v,g22:S,g23:_,a0:{"font-weight":700},g24:M,g25:q,l0:W,g28:j,l1:A,g31:x,l2:$,a1:{"font-weight":700},g33:C,g34:E}})},m=[]},b2c7:function(e,t,a){"use strict";a.r(t);var r=a("f8d2"),o=a.n(r);for(var m in r)["default"].indexOf(m)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(m);t["default"]=o.a},c322:function(e,t,a){"use strict";a.r(t);var r=a("740d1"),o=a("b2c7");for(var m in o)["default"].indexOf(m)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(m);a("463c");var n=a("f0c5"),i=Object(n["a"])(o["default"],r["b"],r["c"],!1,null,"a0e3f3e0",null,!1,r["a"],void 0);t["default"]=i.exports},f8d2:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("25b0"),o={components:{zzxCalendar:function(){Promise.all([a.e("pageKq/common/vendor"),a.e("pageKq/components/zzx-calendar/zzx-calendar")]).then(function(){return resolve(a("a61a"))}.bind(null,a)).catch(a.oe)}},data:function(){return{dayStartDateStr:"",title:"",summaryData:{cdzttimeMinute:0,qkCount:0,qjHour:0,absenteeismMinuteTotal:0,predictWorktimeMinute:0},form:{qjArr:[],ccArr:[],jbArr:[]},mode1e:!0,mode1s:!0,mode2e:!0,mode2s:!0,mode3e:!0,mode3s:!0,dotList:[],flag:!0,date:"",curHolidayN:""}},onLoad:function(t){t.date&&(this.date=t.date,this.come=t.come);var a=e.$u.timeFormat(new Date,"yyyy-mm-dd");a.substr(5,2).startsWith("0")?this.title=a.substr(6,1)+"月考勤汇总":this.title=a.substr(5,2)+"月考勤汇总",this.dayStartDateStr=a,this.initData()},onReady:function(){this.date&&(this.$refs.calRef.initDate(this.date),this.change({fullDate:this.date}),this.$refs.calRef.clickItem({fullDate:this.date}))},methods:{change:function(e){var t=e.fullDate;this.dayStartDateStr=t,t.substr(5,2).startsWith("0")?this.title=t.substr(6,1)+"月考勤汇总":this.title=t.substr(5,2)+"月考勤汇总",this.initData()},daysChange:function(t){var a=t.end,r=(a.getFullYear(),a.getMonth()),o=this.dayStartDateStr.substr(5,2)-1,m=e.$u.timeFormat(a,"yyyy-mm-dd");r!==o&&(this.dayStartDateStr=m,this.$refs.calRef.initDate(this.dayStartDateStr),this.$refs.calRef.clickItem({fullDate:this.dayStartDateStr}))},handleReissuecard:function(t){var a={bkTimeSteps:[]};t=e.$u.timeFormat(t,"yyyy-mm-dd hh:MM:ss"),a.bkTimeSteps.push(t.substr(0,16)),e.setStorageSync("receiptsForm_key",a),e.navigateTo({url:"../kq/leave/leave?type=4&come=mykq"})},initData:function(){var e=this;(0,r.everydayKqData)({dayStartDateStr:this.dayStartDateStr}).then((function(t){if(e.mode1e=!0,e.mode1s=!0,e.mode2e=!0,e.mode2s=!0,e.mode3e=!0,e.mode3s=!0,200==t.data.code){var a=t.data.data;e.summaryData=a.month,e.dotList=[],a.dayStss.forEach((function(t){2==t.dayMode?e.dotList.push({date:t.dayDate,classTimes:"休息",dayMode:t.dayMode}):3==t.dayMode?(a.dayDate==t.dayDate&&t.holidayName&&(e.curHolidayN=t.holidayName),e.dotList.push({date:t.dayDate,classTimes:t.holidayName.substr(0,2),dayMode:t.dayMode})):e.dotList.push({date:t.dayDate,classTimes:t.classesTimeName.substr(0,2),dayMode:t.dayMode})})),a.cardCount=0,a.startWorkTime1&&(a.workTime1s=a.startWorkTime1.substr(0,5),a.workTime1e=a.endWorkTime1.substr(0,5),a.start1="".concat(a.dayDate," ").concat(a.startWorkTime1),a.end1="".concat(a.dayDate," ").concat(a.endWorkTime1),a.cardCount+=2),a.startWorkTime2&&(a.workTime2s=a.startWorkTime2.substr(0,5),a.workTime2e=a.endWorkTime2.substr(0,5),a.start2="".concat(a.dayDate," ").concat(a.startWorkTime2),a.end2="".concat(a.dayDate," ").concat(a.endWorkTime2),a.cardCount+=2),a.startWorkTime3&&(a.workTime3s=a.startWorkTime3.substr(0,5),a.workTime3e=a.endWorkTime3.substr(0,5),a.start3="".concat(a.dayDate," ").concat(a.startWorkTime3),a.end3="".concat(a.dayDate," ").concat(a.endWorkTime3),a.cardCount+=2),a.qjArr.forEach((function(t){t.isPaid?(a.start3?new Date(t.startTime)>=new Date(a.end3)?(e.mode1e=!0,e.mode1s=!0,e.mode2e=!0,e.mode2s=!0,e.mode3e=!0,e.mode3s=!0):(new Date(t.endTime)<=new Date(a.end3)?e.mode3e=!0:e.mode3e=!1,new Date(t.startTime)>=new Date(a.start3)?e.mode3s=!0:new Date(t.endTime)<=new Date(a.start3)?(e.mode3s=!0,e.mode3e=!0):e.mode3s=!1):(e.mode3s=!1,e.mode3e=!1),a.start2?new Date(t.startTime)>=new Date(a.end2)?e.mode2e=!0:(new Date(t.endTime)<=new Date(a.end2)?e.mode2e=!0:e.mode2e=!1,new Date(t.startTime)>=new Date(a.start2)?e.mode2s=!0:new Date(t.endTime)<=new Date(a.start2)?(e.mode2s=!0,e.mode2e=!0):e.mode2s=!1):(e.mode2s=!1,e.mode2e=!1),a.start1?new Date(t.startTime)>=new Date(a.end1)?(e.mode1e=!0,e.mode1s=!0):(new Date(t.endTime)<=new Date(a.end1)?e.mode1e=!0:e.mode1e=!1,new Date(t.startTime)>=new Date(a.start1)?e.mode1s=!0:new Date(t.endTime)<=new Date(a.start1)?(e.mode1s=!0,e.mode1e=!0):e.mode1s=!1):(e.mode1s=!1,e.mode1e=!1)):(e.mode1s=!0,e.mode1e=!0,e.mode2s=!0,e.mode2e=!0,e.mode3s=!0,e.mode3e=!0)})),e.mode1s||e.mode1e||e.mode2s||e.mode2e||e.mode3s||e.mode3e?e.flag=!0:e.flag=!1,e.form=a}else e.$refs.uToast.show({title:t.data.msg,type:"error"}),e.form={qjArr:[],ccArr:[],jbArr:[]},e.summaryData={cdzttimeMinute:0,qkCount:0,qjHour:0,absenteeismMinuteTotal:0}}))},cellClick:function(t){e.navigateTo({url:"../receiptDetail/receiptDetail?id=".concat(t.id,"&who=me")})},handleSummary:function(){e.navigateTo({url:"../summaryDetails/summaryDetails?date=".concat(this.dayStartDateStr)})},backClick:function(){this.come?e.navigateTo({url:"../summaryDetails/summaryDetails?date=".concat(this.dayStartDateStr)}):e.switchTab({url:"/pages/index/index"})}}};t.default=o}).call(this,a("543d")["default"])}},[["6ee8","common/runtime","common/vendor","pageKq/common/vendor"]]]);