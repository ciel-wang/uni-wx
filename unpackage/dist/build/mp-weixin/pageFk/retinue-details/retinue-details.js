require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageFk/retinue-details/retinue-details"],{2865:function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("9523")),r=i(n("3cda")),u=n("d0bf");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={components:{tkiQrcode:function(){Promise.all([n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(function(){return resolve(n("d0fb"))}.bind(null,n)).catch(n.oe)}},data:function(){return{timestamp:0,retinueEmpArr:[],visitorPersonCount:0,otherEmpArr:[],options:[{text:"删除",style:{backgroundColor:"#dd524d",width:"150rpx"}}],popupShow:!1,obj:{},visitorNo:"",linkUrl:"",qrcodeBase64:"",canvasImgBaise64:"",confirmShow:!1,removeIndex:"",timer:null,staticPrefix:"",ctx:""}},onLoad:function(e){var t=e.visitorNo;r.default.baseUrl;this.linkUrl="".concat(r.default.linkUrl,"/#/pageFk/retinue-formlink/retinue-formlink?N=").concat(t,"&appId=").concat(this.vuex_urlobj.appId,"&S=").concat(this.vuex_cfg.isShowSourceAddr,"&T=").concat(2==this.vuex_useInfo.bindEmpType?"targetInvite":"appointment","&C=").concat(this.vuex_cfg.isShowCertificate,"&DT=").concat(this.vuex_cfg.dateType),this.visitorNo=t,this.canvasImgBaise64="",this.initData()},onShareAppMessage:function(e){console.log(e);var t="/pageFk/retinue-formlink/retinue-formlink?N=".concat(this.visitorNo,"&appId=").concat(this.vuex_urlobj.appId,"&S=").concat(this.vuex_cfg.isShowSourceAddr,"&T=").concat(2==this.vuex_useInfo.bindEmpType?"targetInvite":"appointment","&C=").concat(this.vuex_cfg.isShowCertificate,"&DT=").concat(this.vuex_cfg.dateType,"&sid=").concat(this.vuex_urlobj.sid);return{title:"自定义分享标题",path:t}},onUnload:function(){clearTimeout(this.timer)},methods:{erweimaR:function(e){this.qrcodeBase64=e},initCanvas:function(){},shareInvitationCodeClick:function(){var e=this;this.popupShow=!0,setTimeout((function(){e.initCanvas()}),100)},swipeClick:function(e,t){0==e.index&&(this.removeIndex=t,this.confirmShow=!0)},handleConfirm:function(){var e=this,t=this.retinueEmpArr[this.removeIndex];(0,u.retinueRemove)({id:t.id}).then((function(t){e.$refs.uToast.show({message:t.data.msg,type:"success"}),e.retinueEmpArr.splice(e.removeIndex,1),e.initData()})).catch((function(t){e.$refs.uToast.show({message:t,type:"error"})}))},initData:function(){var e=this;(0,u.details)({visitorNo:this.visitorNo}).then((function(t){if(200===t.data.code){var n=t.data.data;e.staticPrefix=n.staticPrefix;var i=[];i=2==e.vuex_useInfo.bindEmpType?n.visitors.filter((function(e){return e.visitorCertificateCode})):n.visitors.length>1?n.visitors.slice(1):[];var o=i.map((function(e){return c(c({},e),{},{show:!1})}));e.visitorPersonCount=n.visitorPersonCount,e.retinueEmpArr=o,e.otherEmpArr=new Array(n.visitorPersonCount-o.length).fill("");var r=new Date(e.iosTransDate(n.serverTime)).getTime(),u=new Date(e.iosTransDate(n.invitationExpireTime)).getTime()-r;e.timestamp=u;var a=n.levalTime,s=n.targetEmpName,l=n.visitorArea,d=n.visitorTime,m=n.invitationExpireTime,f=n.visitorState,p=n.visitors[0].visitorName;a="date"===e.vuex_cfg.dateType?a.substr(0,10):a.substr(0,16),d="date"===e.vuex_cfg.dateType?d.substr(0,10):d.substr(0,16),e.obj={levalTime:a,targetEmpName:s,visitorArea:l,visitorTime:d,empName:p,invitationExpireTime:m,visitorState:f},u/1e3>0&&8==f&&(clearTimeout(e.timer),e.timer=setTimeout((function(){e.initData()}),1e4))}}))},backClick:function(){return this.vuex_urlobj.token?e.redirectTo({url:"../inviteRecord/inviteRecord"}):e.redirectTo({url:"../appointmentrecord/appointmentrecord"})}}};t.default=s}).call(this,n("543d")["default"])},"60ed":function(e,t,n){"use strict";n.r(t);var i=n("2865"),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},6869:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"1e79"))},myCard:function(){return n.e("components/my-card").then(n.bind(null,"2227"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"b595"))},uImage:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-image/u-image")]).then(n.bind(null,"a083"))},uSwipeAction:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swipe-action/u-swipe-action")]).then(n.bind(null,"68f0"))},uSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item")]).then(n.bind(null,"b9de"))},uAvatar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(n.bind(null,"b1e7"))},uTag:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tag/u-tag")]).then(n.bind(null,"2f47"))},tkiQrcode:function(){return Promise.all([n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(n.bind(null,"d0fb"))},myButton:function(){return n.e("components/my-button").then(n.bind(null,"e84c"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"3d93"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"071d"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"b688"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.retinueEmpArr.length),i=e.retinueEmpArr.length||e.otherEmpArr.length,o=i?e.__map(e.retinueEmpArr,(function(t,n){var i=e.__get_orig(t),o=e.$u.guid();return{$orig:i,g2:o}})):null;e._isMounted||(e.e0=function(t){e.popupShow=!1},e.e1=function(t){e.confirmShow=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:i,l0:o}})},r=[]},"92a9":function(e,t,n){"use strict";var i=n("98d5"),o=n.n(i);o.a},"98d5":function(e,t,n){},e6d8:function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("5495");i(n("66fd"));var o=i(n("f98c"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},f98c:function(e,t,n){"use strict";n.r(t);var i=n("6869"),o=n("60ed");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("92a9");var u=n("f0c5"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"49dc345e",null,!1,i["a"],void 0);t["default"]=a.exports}},[["e6d8","common/runtime","common/vendor","pageFk/common/vendor"]]]);