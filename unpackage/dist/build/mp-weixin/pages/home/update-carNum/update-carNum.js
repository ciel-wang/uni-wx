(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/update-carNum/update-carNum"],{"00fb":function(e,t,n){"use strict";n.r(t);var o=n("b3a0"),i=n("8ef9");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("c30a");var u=n("f0c5"),r=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=r.exports},"17ae":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("5495");o(n("66fd"));var i=o(n("00fb"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"45ac":function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("2eee")),a=o(n("9523")),u=o(n("c973")),r=n("ac48"),c=n("55ed");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={data:function(){return{value:"",loading:!1,form:{},plateNumShow:!1,plateNum:"",plateNumColorList:[],carShapeList:[],carEmissionStandardDic:[],fuelOliTypeDic:[],registerTimeShow:!1,actionSheetShow:!1,actionSheetData:[],actionSheetTitle:"",sourceType:"add",id:""}},onLoad:function(e){this.sourceType=e.type,e.id&&(this.id=e.id),this.initData()},methods:{initData:function(){var e=this;return(0,u.default)(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.getCfg)({code:"carPlateNumColor##carEmissionStandard##carFuelOliType"}).then((function(t){var n,o,i;e.carEmissionStandardDic=null===(n=t.data.data)||void 0===n?void 0:n.carEmissionStandard.map((function(e){return{value:e.key,name:e.value}})),e.fuelOliTypeDic=null===(o=t.data.data)||void 0===o?void 0:o.carFuelOliType.map((function(e){return{value:e.key,name:e.value}})),e.plateNumColorList=null===(i=t.data.data)||void 0===i?void 0:i.carPlateNumColor.map((function(e){return{value:e.key,name:e.value}}))}));case 2:return t.next=4,(0,c.getCarShape)().then((function(t){var n=t.data.data.map((function(e){return{value:e.id,name:e.shapeName}}));e.carShapeList=n}));case 4:if(!e.id){t.next=7;break}return t.next=7,(0,c.getCarDetails)({id:e.id}).then((function(t){var n=t.data.data,o=s({},n),i=o.carColor,a=o.id,u=o.plateNum,c=o.plateNumColor,l=o.carShapeId;e.form=s(s({},n.carExt),{},{carColor:i,id:a,plateNum:u,plateNumColor:c,carShapeId:l}),e.plateNum=n.plateNum,e.form.plateNumColorN=(0,r.formatterValue)(c,e.plateNumColorList),e.form.carShapeN=(0,r.formatterValue)(l,e.carShapeList),e.form.carEmissionStandardN=(0,r.formatterValue)(n.carExt.carEmissionStandard,e.carEmissionStandardDic),e.form.fuelOliTypeN=(0,r.formatterValue)(n.carExt.fuelOliType,e.fuelOliTypeDic)}));case 7:case"end":return t.stop()}}),t)})))()},submit:function(){var t=this;this.$u.test.carNo(this.plateNum)?(this.loading=!0,"add"===this.sourceType?(0,c.addPlatenum)(this.form).then((function(n){t.loading=!1,t.$refs.uToast.show({message:n.data.msg,type:"success"}),setTimeout((function(){e.redirectTo({url:"/pages/home/personal/personal"})}),2e3)})).catch((function(e){t.$refs.uToast.show({message:e,type:"error"}),t.loading=!1})):(0,c.updatePlatenum)(this.form).then((function(n){t.loading=!1,t.$refs.uToast.show({message:n.data.msg,type:"success"}),setTimeout((function(){e.redirectTo({url:"/pages/home/personal/personal"})}),2e3)})).catch((function(e){t.$refs.uToast.show({message:e,type:"error"}),t.loading=!1}))):this.$refs.uToast.show({message:"请输入正确的车牌号",type:"warning"})},plateNumChange:function(e){this.plateNum.length<8&&(this.plateNum+=e,this.form.plateNum=this.plateNum)},backspace:function(){this.plateNum.length&&(this.plateNum=this.plateNum.substr(0,this.plateNum.length-1)),this.form.plateNum=this.plateNum},handlerSelect:function(e){"plateNumColor"===e&&(this.actionSheetTitle="请选择车牌颜色",this.actionSheetData=this.plateNumColorList),"carShape"===e&&(this.actionSheetTitle="请选择车型类型",this.actionSheetData=this.carShapeList),"carEmissionStandard"===e&&(this.actionSheetTitle="请选择排放阶段",this.actionSheetData=this.carEmissionStandardDic),"fuelOliType"===e&&(this.actionSheetTitle="请选择燃油类型",this.actionSheetData=this.fuelOliTypeDic),this.selectType=e,this.actionSheetShow=!0},actionSheetChange:function(e){this.form[this.selectType+"N"]=e.name,this.form[this.selectType]=e.value},registerTimeConfim:function(e){var t=e.value;this.form.registerTime=this.$u.timeFormat(t,"yyyy-mm-dd hh:MM:ss"),this.registerTimeShow=!1},backClick:function(){this.$u.route({type:"redirectTo",url:"/pages/home/personal/personal"})}}};t.default=m}).call(this,n("543d")["default"])},"885a":function(e,t,n){},"8ef9":function(e,t,n){"use strict";n.r(t);var o=n("45ac"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},b3a0:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"1e79"))},uForm:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-form/u-form")]).then(n.bind(null,"ff33"))},myCard:function(){return n.e("components/my-card").then(n.bind(null,"2227"))},uCodeInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-code-input/u-code-input")]).then(n.bind(null,"040e"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"f4f7"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"f18a"))},uCollapse:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-collapse/u-collapse")]).then(n.bind(null,"5032"))},uCollapseItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-collapse-item/u-collapse-item")]).then(n.bind(null,"6f4f"))},uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"97f5"))},uCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox/u-checkbox")]).then(n.bind(null,"f04a"))},myButton:function(){return n.e("components/my-button").then(n.bind(null,"e84c"))},uDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(n.bind(null,"2990"))},uActionSheet:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet")]).then(n.bind(null,"ff2a"))},uKeyboard:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-keyboard/u-keyboard")]).then(n.bind(null,"1a2a"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"b688"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,(new Date).getTime());e._isMounted||(e.e0=function(t){e.plateNumShow=!0},e.e1=function(t){e.registerTimeShow=!0},e.e2=function(t){e.registerTimeShow=!1},e.e3=function(t){e.actionSheetShow=!1},e.e4=function(t){e.plateNumShow=!1},e.e5=function(t){e.plateNumShow=!1}),e.$mp.data=Object.assign({},{$root:{g0:n}})},a=[]},c30a:function(e,t,n){"use strict";var o=n("885a"),i=n.n(o);i.a}},[["17ae","common/runtime","common/vendor"]]]);