(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1209:function(e,n,o){"use strict";o.r(n);var u=o("2ace"),t=o("a381");for(var i in t)["default"].indexOf(i)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(i);o("e244");var r=o("f0c5"),s=Object(r["a"])(t["default"],u["b"],u["c"],!1,null,"7907827b",null,!1,u["a"],void 0);n["default"]=s.exports},"2ace":function(e,n,o){"use strict";o.d(n,"b",(function(){return t})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){return u}));var u={uIcon:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(o.bind(null,"1e79"))},uGap:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-gap/u-gap")]).then(o.bind(null,"c921"))},"u-Image":function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u--image/u--image")]).then(o.bind(null,"d648"))},uForm:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-form/u-form")]).then(o.bind(null,"ff33"))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,"f4f7"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,"f18a"))},myButton:function(){return o.e("components/my-button").then(o.bind(null,"e84c"))},uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,"3d93"))},uSearch:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-search/u-search")]).then(o.bind(null,"424e"))},uList:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-list/u-list")]).then(o.bind(null,"5746"))},uListItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-list-item/u-list-item")]).then(o.bind(null,"36e5"))},uCell:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(o.bind(null,"0137"))},uActionSheet:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet")]).then(o.bind(null,"ff2a"))},uOverlay:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-overlay/u-overlay")]).then(o.bind(null,"3776"))},uToast:function(){return o.e("uni_modules/uview-ui/components/u-toast/u-toast").then(o.bind(null,"b688"))}},t=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.actionSheetShow=!0},e.e1=function(n){e.selectSchoolShow=!1},e.e2=function(n){e.actionSheetShow=!1})},i=[]},5354:function(e,n,o){"use strict";(function(e,u){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o("25d6"),i=(o("55ed"),{data:function(){var e=this;return{slogo:"",schoolName:"",selectSchoolShow:!1,schoolList:[],form:{bindEmpType:"",empTypeLabel:"",empName:"",empPhone:"",stuName:"",empCode:""},rules:{empName:[{required:!0,message:"请输入姓名",trigger:["blur"]}],empPhone:[{required:!0,message:"请输入手机号码",trigger:["blur"]},{validator:function(n,o,u){return e.$u.test.mobile(o)},message:"手机号码不正确",trigger:["blur"]}],empTypeLabel:[{required:!0,message:"请选择身份",trigger:["blur"]}],stuName:[{required:!0,message:"请输入学生姓名",trigger:["blur"]}],empCode:[{required:!0,message:"请输入学生身份证号",trigger:["blur"]}]},maskShow:!1,btnDisabled:!1,actionSheetShow:!1,actionSheetData:[{value:1,name:"学生"},{value:2,name:"教职工"},{value:3,name:"家长"}]}},onLoad:function(){var e=this;(0,t.getSchoolList)().then((function(n){var o=n.data.data;if(e.schoolList=o,e.vuex_urlobj.sid){var u=o.filter((function(n){return n.sid==e.vuex_urlobj.sid}));e.schoolName=u.length&&u[0].sname||"",e.slogo=u.length&&u[0].slogo||""}if(!e.schoolName&&1===o.length){var t=o[0],i=t.sname,r=t.sid,s=t.slogo;e.schoolName=i,e.slogo=s,e.$u.vuex("vuex_urlobj.sid",r)}}))},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{submit:function(){var n=this;this.$refs.uForm.validate().then((function(){e.getUserProfile({desc:"用于完善基础资料",success:function(e){console.log(e)},fail:function(e){console.log(e)}}),n.form.appType=2,n.maskShow=!0,n.btnDisabled=!0,(0,t.register)(n.form).then((function(e){if(n.maskShow=!1,200==e.data.code){n.$refs.uToast.show({message:"注册成功！",type:"success",duration:3e3});var o=e.data.data;n.$u.vuex("vuex_urlobj.token",o.token),n.$u.vuex("vuex_urlobj.isBind",1),n.$u.vuex("vuex_urlobj.bindId",o.bindWxInfo.empId+"_"+o.bindWxInfo.bindEmpType),n.$u.vuex("vuex_urlobj.bindEmpType",o.bindWxInfo.bindEmpType),n.$u.vuex("vuex_urlobj.bindWxId",o.bindWxInfo.id),setTimeout((function(){u.switchTab({url:"/pages/index/index"})}),3e3)}})).catch((function(e){n.$refs.uToast.show({message:e,type:"error"}),n.maskShow=!1,n.btnDisabled=!1}))}))},schoolListClick:function(e){var n=e.sname,o=e.sid,t=e.slogo;this.schoolName=n,this.slogo=t,u.removeStorageSync("vuex_cfg"),u.removeStorageSync("vuex_useInfo"),u.removeStorageSync("vuex_menuAuth"),this.$u.vuex("vuex_urlobj.sid",o),this.selectSchoolShow=!1},schoolChange:function(){1!==this.schoolList.length&&(this.selectSchoolShow=!0)},actionSheetChange:function(e){this.form.empTypeLabel=e.name,this.form.bindEmpType=e.value,this.$set(this.form,"bindEmpType",e.value)},backClick:function(){u.switchTab({url:"/pages/index/index"})}}});n.default=i}).call(this,o("bc2e")["default"],o("543d")["default"])},"56b4":function(e,n,o){"use strict";(function(e,n){var u=o("4ea4");o("5495");u(o("66fd"));var t=u(o("1209"));e.__webpack_require_UNI_MP_PLUGIN__=o,n(t.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"802b":function(e,n,o){},a381:function(e,n,o){"use strict";o.r(n);var u=o("5354"),t=o.n(u);for(var i in u)["default"].indexOf(i)<0&&function(e){o.d(n,e,(function(){return u[e]}))}(i);n["default"]=t.a},e244:function(e,n,o){"use strict";var u=o("802b"),t=o.n(u);t.a}},[["56b4","common/runtime","common/vendor"]]]);